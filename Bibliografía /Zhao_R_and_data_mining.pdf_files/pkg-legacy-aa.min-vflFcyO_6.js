define("modules/clean/groups/api",["require","exports","tslib","jquery","modules/clean/ajax","modules/clean/contacts/cache_store","modules/clean/viewer"],(function(e,t,r,n,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o);function i(e){var t="/groups_ajax/"+e.method,r=e.reload_contacts||!1;return o.WebRequest({url:t,type:"post",data:e.data,subject_user:s.Viewer.get_viewer().work_user,success:function(t){var o=JSON.parse(t);(o.ok&&(e.success(o.data),n.default(".error_msg").hide()),r)&&a.DefaultContactsCacheStore.getOrCreateForViewer().load_contacts(!0)},error:function(t){var r=t.responseText;e.error&&(e.error(r.slice(4)),n.default(".error_msg").hide())}})}t.ready=function(){},t.get_groups_for_user=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=function(){return{}}),i({method:"get_groups_for_user",data:e,success:t})},t.get_group_info=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=function(){return{}}),i({method:"get_group_info",data:e,success:t})},t.get_users_for_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"get_users_in_group",data:e,success:t})},t.create_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_new_group",data:e,success:t,reload_contacts:!0})},t.create_group_with_users=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_new_group_with_users",data:e,success:t,reload_contacts:!0})},t.remove_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"remove_group",data:e,success:t,reload_contacts:!0})},t.rename_group=function(e,t,r){return void 0===r&&(r=function(){return{}}),i({method:"rename_group",data:e,success:t,error:r,reload_contacts:!0})},t.add_users_to_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"add_users_to_group",data:e,success:t,reload_contacts:!0})},t.remove_user_from_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"remove_user_from_group",data:e,success:t,reload_contacts:!0})},t.change_group_member_type=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"change_group_member_type",data:e,success:t})},t.make_group_join_request=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_group_join_request",data:e,success:t})},t.metaserver_ajax=i})),define("modules/clean/legacy_pyxl_controllers/role_picker",["require","exports","tslib","external/lodash","modules/clean/multiaccount_login","modules/clean/page_role_observer","modules/clean/viewer","modules/core/controller_helpers","modules/core/exception"],(function(e,t,r,n,o,a,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),o=r.__importDefault(o),a=r.__importDefault(a),i=r.__importStar(i);var u={ALL:"all",PERSONAL:"personal",WORK:"work"};t.RolePickerState=u;var c=(function(){function e(e){null==e&&(e={}),this.get_state=this.get_state.bind(this),this.set_state=this.set_state.bind(this),this.ensure_role_is_visible=this.ensure_role_is_visible.bind(this),this.is_role_visible=this.is_role_visible.bind(this),this.is_user_visible=this.is_user_visible.bind(this),this._do_login=this._do_login.bind(this),this._actually_set_state=this._actually_set_state.bind(this),this._allow_merged_state=null==e.allow_merged_state||e.allow_merged_state,this._limit_to_role=null!=e.limit_to_role?e.limit_to_role:null;var t=s.Viewer.get_viewer(),r=t.is_role_signed_in(u.PERSONAL)&&t.is_role_signed_in(u.WORK);if(e.initial_state){var o=n.values(u);l.assert(Array.from(o).includes(e.initial_state),"RolePicker requires initial_state to be one of: "+o),this.set_state(e.initial_state)}else if(this._allow_merged_state&&r)this.set_state(u.ALL);else{var a=t.get_users();l.assert(a.length,"tried to use RolePicker on a page with no users");var i=a[0];this.set_state(i.role)}}return e.prototype.get_state=function(){return this._state},e.prototype.set_state=function(e){var t;if(l.assert(this._allow_merged_state||e!==u.ALL,"tried to set merged state in non-merged picker"),null!=this._limit_to_role&&l.assert(e===u.ALL||e===this._limit_to_role,"some awful assert about roles"),e===u.ALL){for(var r=0,n=["personal","work","photos"];r<n.length;r++)if(t=n[r],!s.Viewer.get_viewer().is_role_signed_in(t))return void this._do_login(t,e)}else if(t=e,!s.Viewer.get_viewer().is_role_signed_in(t))return void this._do_login(t,e);return this._actually_set_state(e)},e.prototype.update_picker_ui=function(){},e.prototype.ensure_role_is_visible=function(e){if(!this.is_role_visible(e))return this._allow_merged_state?this.set_state(u.ALL):this.set_state(e)},e.prototype.is_role_visible=function(e){return this._state===u.ALL||this._state===e},e.prototype.is_user_visible=function(e){return this.is_role_visible(e.role)},e.prototype._do_login=function(e,t){var r=this;return o.default.show_modal({role:e,on_success:function(){return r._actually_set_state(t)}})},e.prototype._actually_set_state=function(e){if(e!==this._state)return this._state=e,this.update_picker_ui(),"function"==typeof this.on_state_change?this.on_state_change(e):void 0},e})();t.RolePicker=c;var d=(function(e){function t(t,r){var n=this;return null==r&&(r={}),t.find(".bubble-picker").on("db:bubblepicker:changed",(function(e,t){n.on_ui_change(e,t)})),(n=e.call(this,r)||this).on_ui_change=n.on_ui_change.bind(n),n.update_picker_ui=n.update_picker_ui.bind(n),n.limit_to_role=n.limit_to_role.bind(n),n.$container=t,n.$bubble_picker=n.$bubble_picker,n}return r.__extends(t,e),t.prototype.on_ui_change=function(e,t){var r=t.clicked_val;if(r!==this._state)return i.get_controller(this.$bubble_picker).set_value(this._state),this.set_state(r)},t.prototype.update_picker_ui=function(){return i.get_controller(this.$bubble_picker).set_value(this._state)},t.prototype.limit_to_role=function(e,t){var r,n;if(null!=e)for(r in this.ensure_role_is_visible(e),u)(n=u[r])!==e&&n!==u.ALL&&i.get_controller(this.$bubble_picker).disable_option(n,t);else for(r in u)n=u[r],i.get_controller(this.$bubble_picker).enable_option(n);return this._limit_to_role=e},t})(c);t.RoleSelect=d;var _=(function(e){function t(t,r){return null==r&&(r={}),r.allow_merged_state=!1,e.call(this,t,r)||this}return r.__extends(t,e),t.prototype.on_state_change=function(e){var t=(function(){switch(e){case u.PERSONAL:return"personal";case u.WORK:return"work"}})();return a.default.emit(t)},t})(d);t.PageRoleSelect=_})),define("modules/clean/react/share_sync/actions",["require","exports","tslib","modules/clean/multiaccount_login","modules/clean/viewer","modules/clean/sharing/shared_content_link_mount_folder"],(function(e,t,r,n,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),a=r.__importStar(a),t.syncToDropbox=function(e,t,r){new Promise((function(e,r){o.Viewer.get_viewer().is_role_signed_in(t)?e():n.default.show_modal({role:t,on_success:function(){e()}})})).then((function(){a.mountSharedFolder(e,t,r,!0)}))}})),define("modules/clean/react/share_sync/button",["require","exports","tslib","react","modules/clean/filepath","modules/clean/react/bubble_menu","modules/clean/react/share_sync/models","modules/clean/sharing/constants","modules/clean/sharing/views/sync_coachmark","modules/clean/react/sprite_div","modules/clean/viewer","modules/core/i18n","modules/constants/payments","modules/clean/analytics"],(function(e,t,r,n,o,a,s,i,l,u,c,d,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o),i=r.__importStar(i),u=r.__importDefault(u),_=r.__importStar(_);var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.options.map((function(e){return n.default.createElement(a.BubbleMenuItem,{onClick:function(){return e.handler()},disabled:e.isDisabled},n.default.createElement(u.default,{group:"web",name:e.spriteName,text:e.text}))}));return n.default.createElement(a.BubbleMenu,{targetButton:this.props.targetButton,position:a.BubbleMenu.POSITIONS.BOTTOM,verticalDisplacement:4,items:e})},t})(n.default.Component),f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logShareFolderPreviewUpgradeBtn=function(e){m.GrowthEventsLogger.log("wb_nq_pre_fo_up_b",{action:e,button_text:"Upgrade to Add Folder",destination_url:"http://www.dropbox.com/low-space",location:"top",quota_status:"near",upsell_type:"button"})},t.handleUpgradeButtonClick=function(){t.logShareFolderPreviewUpgradeBtn("click")},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.props.outOfQuota&&this.logShareFolderPreviewUpgradeBtn("view")},t.prototype.onClickedOption=function(e,t){e.preventDefault(),t.handler()},t.prototype.getSyncOptions=function(){var e=this,t=this.props.sharePermission.canSyncToDropboxRoles,r=c.Viewer.get_viewer();return t.map((function(t){return s.ShareSyncActionOption.buildOption(e.props.folder,r,t,i.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE)}))},t.prototype.renderSyncCoachmark=function(){var e=this.props.sharePermission.canSyncToDropboxRoles.length>0;return this.props.showSyncCoachmark&&e?n.default.createElement("div",{className:"sync-button__coachmark-container"},n.default.createElement(l.SharingSyncCoachmark,null)):null},t.prototype.renderSyncButton=function(){var e=this;if(""!==this.props.shareToken.subPath)return null;if(0===this.props.sharePermission.canSyncToDropboxRoles.length)return null;var t="button-primary control__button sync-button";if(this.props.outOfQuota){var r=_.OUT_OF_SPACE_URL+"?oqa=wb_oq_pre_fo_up_b";return n.default.createElement("a",{className:t,href:r,onClick:this.handleUpgradeButtonClick},d.intl.formatMessage({defaultMessage:"Upgrade to Add Folder"}))}var a=void 0;if(this.props.user&&this.props.user.is_cdm_member){var s=o.filename(this.props.user.cdm_tmf_path);a=s.length>25?d.intl.formatMessage({defaultMessage:"Add to my member folder"}):d.intl.formatMessage({defaultMessage:"Add to <strong>{cdm_tmf_name}</strong> folder"},{cdm_tmf_name:s,strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("strong",{style:{fontWeight:800}},e)}})}else a=d.intl.formatMessage({defaultMessage:"Add to Dropbox"});var i=this.getSyncOptions();if(1===i.length)return n.default.createElement("button",{className:t,style:{display:"-webkit-box"},onClick:function(t){return e.onClickedOption(t,i[0])}},a);var l=n.default.createElement("button",{className:t},a);return n.default.createElement(p,{targetButton:l,folder:this.props.folder,shareToken:this.props.shareToken,options:i})},t.prototype.render=function(){return n.default.createElement("div",null,this.renderSyncCoachmark(),this.renderSyncButton())},t})(n.default.Component);t.ShareSyncButton=f})),define("modules/clean/react/share_sync/models",["require","exports","tslib","immutable","react","modules/clean/filepath","modules/clean/react/share_sync/actions","modules/core/i18n"],(function(e,t,r,n,o,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),o=r.__importDefault(o),a=r.__importStar(a),s=r.__importStar(s);var l={text:void 0,handler:void 0,isDisabled:!1,spriteName:void 0},u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.buildOption=function(e,r,n,l){var u=i.intl.formatMessage({defaultMessage:"Save to my Dropbox"}),c="dropbox",d=r.get_user_by_role(n);if(d&&d.is_cdm_member){var _=a.filename(d.cdm_tmf_path);u=_.length>12?i.intl.formatMessage({defaultMessage:"Save to my member folder"}):i.intl.formatMessage({defaultMessage:"Save to <strong>{cdm_tmf_name}</strong> folder"},{cdm_tmf_name:_,strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("strong",null,e)}}),r.is_paired&&(c="s_briefcase")}else if(r.is_paired)switch(n){case"personal":u=i.intl.formatMessage({defaultMessage:"Save to personal Dropbox"}),c="s_house";break;case"work":u=i.intl.formatMessage({defaultMessage:"Save to {team_name} Dropbox"},{team_name:r.team_name}),c="s_briefcase"}return new t({text:u,handler:function(){s.syncToDropbox(e.shared_folder_id,n,l)},spriteName:c})},t})(n.Record(l));t.ShareSyncActionOption=u})),define("modules/clean/sharing/notifications",["require","exports","tslib","jquery","modules/clean/browse_interface","modules/clean/sharing/api/client","modules/clean/sharing/ui_notifications_util","modules/clean/viewer","modules/constants/payments","modules/core/browser","modules/core/i18n","modules/core/uri"],(function(e,t,r,n,o,a,s,i,l,u,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o),l=r.__importStar(l),u=r.__importStar(u);t.register_dismiss=function(e){var t,r,o=n.default(e).closest("form");return t=o.closest(".sc-invite-action"),r=function(e){return e.addClass("loading")},null!=t&&r(t),o.length&&new a.ShareApiClient({userId:o[0]._subject_uid.value}).dismissInviteNotification({contentId:o[0].content_id.value}).finally((function(){return o.closest(".sc-invite-action").removeClass("loading"),o.closest(".feed-row").remove()})),!1};t.register_mount=function(e){var t=n.default(e);t.closest(".sc-invite-action").addClass("loading");var r=i.Viewer.get_viewer().get_user_by_id(e._subject_uid.value);return new a.FolderShareApiClient({userId:r.id}).mount({contentId:e.sf_id.value,origin:"NOTIFICATION_WEB"}).then((function(e){t.closest(".sc-invite-action").addClass("sf-mounted");var n=e.path_lower,a=new d.URI({path:o.get_browse_root(r)+n}).toString();return u.redirect(a),s.sharingNotificationSuccess(c.intl.formatMessage({defaultMessage:"Added the shared folder {folder_name}."},{folder_name:e.name}))})).finally((function(){return t.closest(".sc-invite-action").removeClass("loading")})),!1};t.upgrade_to_mount=function(){s.sharingNotificationInfo(c.intl.formatMessage({defaultMessage:"Continue upgrading to add the shared folder to your Dropbox."}));var e=l.BUY_URL,t=new d.URI({scheme:"https",authority:"www.dropbox.com",path:e});return t.updateQuery({cont:"sf",oqa:"sf_aoq_b_n"}),u.redirect(t.toString()),!1}})),define("modules/clean/sharing/views/sync_coachmark",["require","exports","tslib","react","modules/clean/ajax","modules/clean/react/bubble","modules/clean/react/css","modules/clean/react/image","modules/clean/static_urls","modules/core/i18n"],(function(e,t,r,n,o,a,s,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o),a=r.__importDefault(a);var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!0},t.hideSyncCoachmark=function(){t.setState({show:!1})},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){o.BackgroundRequest({url:"/sharing/seen_sync_coachmark"})},t.prototype.render=function(){return this.state.show?n.default.createElement(a.default,{arrow:a.default.ARROW.TOP_RIGHT,className:"sync-coachmark u-pad-s"},n.default.createElement(i.Image,{className:"u-l-ib",src:l.static_url("/static/images/sharing/sync_coachmark-vflvg8Oy0.png"),srcHiRes:l.static_url("/static/images/sharing/sync_coachmark@2x-vflhX3Mhx.png")}),n.default.createElement("div",{className:"u-l-ib u-pad-left-s sync-coachmark__content"},n.default.createElement("h2",null,u.intl.formatMessage({defaultMessage:"Stay in sync"})),n.default.createElement("p",null,u.intl.formatMessage({defaultMessage:"For easy access to this folder in the future, add it to your Dropbox."})),n.default.createElement("button",{className:"c-btn c-btn--secondary",onClick:this.hideSyncCoachmark},u.intl.formatMessage({defaultMessage:"Got it"})))):n.default.createElement("div",null)},t.displayName="SharingSyncCoachmark",t})(n.default.Component);t.SharingSyncCoachmark=s.requireCssWithComponent(c,["/static/css/sharing/sync_coachmark-vfl_8vkAL.css"])})),define("modules/clean/teams/limited_team_invite_form",["require","exports","tslib","classnames","react","react-dom-factories","modules/core/uri","modules/core/i18n","modules/clean/ajax","modules/clean/analytics","modules/clean/css","modules/clean/contacts/contact_token_state","modules/clean/contacts/tokenizer","modules/clean/contacts/types","modules/clean/react/input","modules/core/browser"],(function(e,t,r,n,o,a,s,i,l,u,c,d,_,m,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importDefault(o),a=r.__importStar(a),l=r.__importStar(l),c=r.__importStar(c),m=r.__importDefault(m),p=r.__importStar(p),f=r.__importStar(f);var h=p.textarea,g=(function(){function e(){this.inFlight=!0,this.canInvite=!1,this.reason="checking",this.callbacks=[]}return e.prototype.whenReady=function(e){this.inFlight?this.callbacks.push(e):e()},e.prototype.resultArrived=function(e,t){if(this.inFlight){this.inFlight=!1,this.canInvite=e,this.reason=t;for(var r=0,n=this.callbacks;r<n.length;r++){(0,n[r])()}this.callbacks=[]}},e})(),v=function(e){var t=this;this.checkEmails=function(e,r){var n={},o=e.length;if(0===o)return r(n);for(var a=[],s=function(e){var s=t.checkedEmails[e];s||(s=t.checkedEmails[e]=new g,a.push(e)),s.whenReady((function(){n[e]=s,0==--o&&r(n)}))},i=0,u=e;i<u.length;i++)s(u[i]);(function(e){l.WebRequest({url:t.checkUrl,data:{emails:e.join(",")},success:function(e){var r=JSON.parse(e);for(var n in r)if(r[n]){var o=r[n],a=o.can_invite,s=o.reason;t.checkedEmails[n]&&t.checkedEmails[n].resultArrived(a,s)}},error:function(){for(var r=0,n=e;r<n.length;r++){var o=n[r];delete t.checkedEmails[o]}}})})(a)},this.getEmailCheckResult=function(e){return t.checkedEmails[e]},this.checkUrl=e,this.checkedEmails={}};t.InvitationContexts={existingTeam:{id:"existingTeam",checkUrl:"/team/manage/check_can_invite"},createLimitedTeam:{id:"createLimitedTeam",checkUrl:"/team/create_limited/check_can_invite"}};var b={};for(var y in t.InvitationContexts)if(t.InvitationContexts[y]){var k=t.InvitationContexts[y],S=k.id,w=k.checkUrl;b[S]=new v(w)}var C=(function(e){function l(t){var n=e.call(this,t)||this;return n._isUnMounted=!1,n.getContacts=function(){return n.refs.tokenizer.getContacts()},n.getFinalData=function(e){var t;n.refs.tokenizer.tokenizeAll();var r=n.getContacts();n.props.includeCustomMessage&&(t=n.refs.customMessage.getValue()),n._ensureContactsStateUpdated(r,(function(){var o=r.filter((function(e){return e.type===m.default.EMAIL})).map((function(e){return e.email}));n._updateErrorMessage((function(){u.TeamsWebActionsLogger.log("suggest_members_entered_email_error",{error_message:n.state.errorMessage,url:f.get_href()})})),e({emails:o,custom_message:t})}))},n.areAllContactsValid=function(){if(n._overInviteLimit())return!1;var e=n.refs.tokenizer.serializeInputData().tokens;return 0===e.length||e.every((function(e){return n._validateContact(e).state===d.ContactTokenState.ok}))},n.isEmpty=function(){var e=n.refs.tokenizer.serializeInputData(),t=e.tokens,r=e.value;return 0===t.length&&0===r.length},n._ensureContactsStateUpdated=function(e,t){var r=(e=e.filter((function(e){return e.type===m.default.EMAIL&&!e.invalid&&!e.on_team}))).map((function(e){return e.email}));n.state.emailCheckerStore.checkEmails(r,(function(){n._isUnMounted||t()}))},n._validateContact=function(e){var t;if(e.invalid)t={state:d.ContactTokenState.invalid,msg:i.intl.formatMessage({defaultMessage:"Invalid email."})};else if(e.on_team)t={state:d.ContactTokenState.invalid,msg:i.intl.formatMessage({defaultMessage:"User is already a member of this team."})};else{var r=n.state.emailCheckerStore.getEmailCheckResult(e.email),o=null;r?r.inFlight?t={state:d.ContactTokenState.pending,msg:o}:r.canInvite?t={state:d.ContactTokenState.ok,msg:o}:("team_member"===r.reason?o=i.intl.formatMessage({defaultMessage:"This person is already on another team."}):"already_on_this_team"===r.reason?o=i.intl.formatMessage({defaultMessage:"User is already invited to this team."}):"error"===r.reason&&(o=i.intl.formatMessage({defaultMessage:"User isnâ€™t eligible to join this team."})),t={state:d.ContactTokenState.invalid,msg:o}):t={state:d.ContactTokenState.invalid,msg:o}}return t},n._overInviteLimit=function(){var e=n.refs.tokenizer.serializeInputData().tokens;return void 0!==n.props.memberInviteLimit&&e.length>n.props.memberInviteLimit},n._updateErrorMessage=function(e){if(n.refs.tokenizer){for(var t=0,o=n.refs.tokenizer.serializeInputData().tokens;t<o.length;t++){var l=o[t],u=n._validateContact(l),c=u.state,_=u.msg;if(c!==d.ContactTokenState.ok)return void n.setState({errorMessage:_},e)}if(n._overInviteLimit()){var m={tk:String(n.props.maxTeamSize),_camp:"invite"},p=new s.URI({path:"/team/upgrade",query:m});n.setState({errorMessage:i.intl.formatMessage({defaultMessage:"{count, plural, one{You have {count} invite remaining. <upgradeLink>Upgrade</upgradeLink> now to add as many members as you like to your team.} other{You have {count} invites remaining. <upgradeLink>Upgrade</upgradeLink> now to add as many members as you like to your team.}}"},{count:n.props.memberInviteLimit,upgradeLink:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.a.apply(a,r.__spreadArrays([{href:p.toString()}],e))}})},e)}else n.setState({errorMessage:null})}},n.onContentsChange=function(e,t){n._ensureContactsStateUpdated(e,(function(){n._updateErrorMessage(),n.props.onChange&&n.props.onChange()}))},n._customContactFilter=function(e){return!(e.type!==m.default.EMAIL||e.team||!e.name||e.email===n.props.user.email)},n.state={errorMessage:null,emailCheckerStore:n.props.emailCheckerStore||b[n.props.invitationContext.id]},n}return r.__extends(l,e),l.prototype.componentWillMount=function(){var e=this;c.require_css("/static/css/teams/limited_team_invite_form-vflcSjpys.css"),c.require_css("/static/css/react/contacts_tokenizer-vfl6f1mr3.css"),this.props.populatedContacts&&this.props.populatedContacts.length>0&&this._ensureContactsStateUpdated(this.props.populatedContacts,(function(){e.props.onChange&&e.props.onChange()}))},l.prototype.componentDidUnMount=function(){this._isUnMounted=!0},l.prototype.render=function(){var e,t={"limited-team-invite-form":!0,"error-message-fixed":this.props.errorMessageSpaceFixed,"has-custom-message":this.props.includeCustomMessage};return this.props.includeCustomMessage&&(e=o.default.createElement(h,{ref:"customMessage",className:"custom-message","disable-errors":!0,placeholder:this.props.messagePlaceholder,value:this.props.populatedCustomMessage})),o.default.createElement("div",{className:n.default(t,this.props.customClass)},o.default.createElement("div",{className:"error-message u-mar-bottom-xss"},this.props.customErrorMessage||this.state.errorMessage),o.default.createElement(_.ContactsTokenizer,{ref:"tokenizer",user:this.props.user,placeholder:this.props.emailPlaceholder,onContentsChange:this.onContentsChange,focusOnMount:this.props.autofocusTokenizer,populatedInputData:{tokens:this.props.populatedContacts,value:""},tokenSpacing:this.props.tokenSpacing,customContactValidator:this._validateContact,customContactFilter:this._customContactFilter}),e)},l.displayName="LimitedTeamInviteForm",l.defaultProps={customClass:"",invitationContext:t.InvitationContexts.existingTeam,populatedContacts:[],emailPlaceholder:i.intl.formatMessage({defaultMessage:"Name or email"}),messagePlaceholder:i.intl.formatMessage({defaultMessage:"Add a message (optional)"}),includeCustomMessage:!0,autofocusTokenizer:!0},l})(o.default.Component);t.LimitedTeamInviteForm=C})),define("modules/clean/top_notif",["require","exports","tslib","jquery","modules/clean/ajax"],(function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o);var a={HIDE_EVENT:"db:topnotificationbar:hide",show:function(){var e;(e=document.body.classList).add.apply(e,["top-notification-bar","has-top-notification"])},hide:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.default("#top-notification-bar-container").remove(),n.default(".top-notification-bar-silo").remove(),(e=document.body.classList).remove.apply(e,["top-notification-bar","has-top-notification"]),n.default(".embedded-app.IndexRebrandPage.top-notification-bar").removeClass("top-notification-bar"),n.default(".maestro #notify-wrapper.with-top-notification").removeClass("with-top-notification"),n.default(document).trigger(this.HIDE_EVENT)},hideById:function(e){document.querySelector(".top-notification-bar-container #"+e)&&a.hide()}};t.TopNotificationBar=a;var s={init:function(){return a.show(),n.default(".eu-bar-dismiss").on("click",(function(e){return e.preventDefault(),a.hide(),o.SilentBackgroundRequest({url:"/dismiss_eu_cookie_notification"})}))}};t.EUCookieNotificationBar=s;var i={init:function(){return a.show(),n.default("#locale-switch-banner-dismiss").on("click",(function(e){return e.preventDefault(),a.hide(),o.SilentBackgroundRequest({url:"/dismiss_locale_switch_banner"})}))}};t.LocaleSwitchBar=i;var l={init:function(){return a.show(),n.default("#super-inactive-recover-bar-dismiss").on("click",(function(e){return e.preventDefault(),a.hide(),o.SilentBackgroundRequest({url:"/dismiss_super_inactive_recover_bar"})}))}};t.SuperInactiveRecoverBar=l;var u={init:function(){return a.show(),n.default("#unsupported-browser-dismiss").on("click",(function(e){return e.preventDefault(),a.hide(),o.SilentBackgroundRequest({url:"/dismiss_browser_msg"})}))}};t.UnsupportedBrowser=u;var c={init:function(e){return a.show(),n.default(".beta-locale-dismiss").on("click",(function(t){return t.preventDefault(),a.hide(),o.SilentBackgroundRequest({url:"/dismiss_beta_locale_notification",data:{source:e}})}))}};t.BetaLocaleNotificationBar=c}));
//# sourceMappingURL=pkg-legacy-aa.min.js-vflXK7x0Q.map