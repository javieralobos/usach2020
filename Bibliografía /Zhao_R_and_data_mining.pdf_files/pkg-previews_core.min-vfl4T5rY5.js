define("comments2/components/utils/throttle-debounce",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t){var r=!0,n=null;function i(){r=!0,null!==n&&(e.apply(void 0,n),n=null)}return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];r?(r=!1,e.apply(void 0,o),setTimeout(i,t)):n=o}},t.debounce=function(e,t,r){var n;return void 0===r&&(r=!1),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=this,s=function(){n=void 0,r||e.apply(a,i)},l=r&&void 0===n;void 0!==n&&window.clearTimeout(n),n=window.setTimeout(s,t),l&&e.apply(a,i)}}})),define("comments2/transforms",["require","exports","comments2/transforms/comments","comments2/transforms/threads","comments2/transforms/users","comments2/transforms/revisions","comments2/transforms/annotations","comments2/transforms/third_party_source"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iCommentContentToUserSubmittedComment=r.iCommentContentToUserSubmittedComment,t.threadsToIThreadMap=n.threadsToIThreadMap,t.threadToIThread=n.threadToIThread,t.usersToIUserMap=i.usersToIUserMap,t.userToIUser=i.userToIUser,t.streamToRevision=o.streamToRevision,t.numberedAnnotationToIInteractionAnnotation=a.numberedAnnotationToIInteractionAnnotation,t.iInteractionAnnotationToNumberedAnnotation=a.iInteractionAnnotationToNumberedAnnotation,t.thirdPartySourceToIThirdPartySource=s.thirdPartySourceToIThirdPartySource})),define("comments2/transforms/annotations",["require","exports","tslib"],(function(e,t,r){"use strict";function n(e,t){return e[".tag"]===t}Object.defineProperty(t,"__esModule",{value:!0}),t.annotationToIAnnotation=function(e){if(n(e,"video"))return{type:"video",time:e.time};if(n(e,"audio"))return{type:"audio",time:e.time};if(n(e,"document"))return{type:"document",regionType:e.region_type[".tag"],label:e.label,regions:e.regions};if(n(e,"image"))return{type:"image",region:e.region,label:e.label};throw new Error("Attempted to convert an annotation type that does not yet exist.")},t.iAnnotationToAnnotation=function(e){return"video"===e.type?{".tag":"video",time:e.time}:"audio"===e.type?{".tag":"audio",time:e.time}:"document"===e.type?{".tag":"document",regions:e.regions,region_type:{".tag":e.regionType}}:{".tag":"image",region:r.__assign(r.__assign({},e.region),{page:1})}},t.numberedAnnotationToIInteractionAnnotation=function(e){return"image"===e.type?{type:"rnd",regions:[e.region]}:"highlight"===e.regionType?{type:"highlight",regions:e.regions}:{type:"rnd",regions:e.regions}},t.iInteractionAnnotationToNumberedAnnotation=function(e,t){var n=e.type,i=e.regions;return void 0===t?{type:"image",region:i[0]}:{type:"document",regionType:"rnd"===n?"rectangle":"highlight",regions:i.map((function(e){return(function(e,t){return r.__assign(r.__assign({},e),{page:t})})(e,t)}))}}})),define("comments2/transforms/comments",["require","exports","comments2/transforms/annotations","comments2/transforms/metadata","comments2/transforms/revisions"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentToIComment=function(e,t,r,o){return{author:r[e.author_id],content:{metadata:n.metadataToIMetadata(e.metadata),text:e.content},deleted:e.deleted,id:e.id,threadId:t,timestamp:new Date(e.timestamp),revisionInfo:o&&e.revision?i.revisionInfoToIRevisionInfo(o,e.revision):{isCurrent:!0},userPermissions:{canDelete:e.permissions.can_delete,canEdit:e.permissions.can_edit}}},t.iCommentContentToUserSubmittedComment=function(e){var t=e.annotation,o=e.content,a=e.stream;return{annotation_data:t?r.iAnnotationToAnnotation(t):void 0,content:o.text,metadata:n.iCommentMetadataToUserSubmittedMetadata(o.metadata),revision:i.streamToRevision(a)}}})),define("comments2/transforms/metadata",["require","exports","tslib"],(function(e,t,r){"use strict";function n(e,t){return e.type===t}function i(e){return n(e,"mention")}function o(e){return n(e,"style")}function a(e){return n(e,"sticker")}function s(e){var t=e.format[".tag"];if("other"===t)throw new Error('"other" is not a valid format block');return{location:e.location,style:t,type:"style"}}function l(e){var t=e.user.type[".tag"];if("other"===t)throw new Error('"other" is not a valid user type');var r={identifier:e.user.identifier,type:t};return{location:e.location,type:"mention",user:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.isMentionMetadata=i,t.isStyleMetadata=o,t.isStickerMetadata=a,t.metadataToIMetadata=function(e){var t=r.__spreadArrays(e.formatting.map(s),e.mentions.map(l));if(e.sticker){var n=(function(e){if(e.url&&e.name&&e.description)return{type:"sticker",id:e.id,url:e.url,name:e.name,description:e.description}})(e.sticker);n&&t.push(n)}return t},t.iCommentMetadataToUserSubmittedMetadata=function(e){var t=e.filter(o).map((function(e){return{format:{".tag":e.style},location:e.location}})),r=e.filter(i).map((function(e){return{user:{type:{".tag":e.user.type},identifier:e.user.identifier},location:e.location}})),n=e.find(a);return{formatting:t,mentions:r,sticker:n?{id:n.id}:void 0}}})),define("comments2/transforms/revisions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revisionInfoToIRevisionInfo=function(e,t){var r=t.timestamp?new Date(t.timestamp):void 0;return{isCurrent:e.ns_id===t.ns_id&&e.sjid===t.sjid,revision:{nsId:t.ns_id,sjId:t.sjid},timestamp:r}},t.streamToRevision=function(e){return e&&"file"===e.type?{ns_id:e.ns_id,sjid:e.sjid}:void 0}})),define("comments2/transforms/third_party_source",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartySourceToIThirdPartySource=function(e){return e[".tag"]}})),define("comments2/transforms/threads",["require","exports","tslib","external/lodash","comments2/transforms/annotations","comments2/transforms/comments"],(function(e,t,r,n,i,o){"use strict";function a(e,t){if("resolved_no_details"===e[".tag"])return{type:"no_details"};if((function(e){return"resolved_with_details"===e[".tag"]})(e))return{type:"with_details",resolver:t[e.resolver_id],resolvedTimestamp:new Date(e.resolved_timestamp)};throw new Error("Not a valid type for ResolvedInfo.")}function s(e,t,n){var s=e.comments.map((function(r){return o.commentToIComment(r,e.id,t,n)})),l=e.resolved_info?{resolved:!0,resolvedInfo:a(e.resolved_info,t)}:{resolved:!1};return r.__assign(r.__assign({annotation:e.annotation_data?i.annotationToIAnnotation(e.annotation_data):void 0,comments:s,id:e.id,read:e.read,readonly:e.readonly,isShownInBrowseSurface:!!e.is_shown_in_browse_surface,isThirdParty:e.is_third_party},l),{timestamp:s[0].timestamp})}Object.defineProperty(t,"__esModule",{value:!0}),t.resolvedInfoToIResolvedInfo=a,t.threadToIThread=s,t.threadsToIThreadMap=function(e,t,r){var i=e.map((function(e){return s(e,t,r)}));return n.keyBy(i,"id")}})),define("comments2/transforms/users",["require","exports","external/lodash"],(function(e,t,r){"use strict";function n(e){return{id:e.id,name:{display:e.display_name,initials:e.initials,public:e.public_name},photoUrl:e.photo_url}}Object.defineProperty(t,"__esModule",{value:!0}),t.userToIUser=n,t.usersToIUserMap=function(e){var t=e.map(n);return r.keyBy(t,"id")}}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/abuse/async_report_flag",["require","exports","modules/clean/react/async/loadable"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={loader:function(){return new Promise((function(t,r){e(["modules/clean/abuse/report_flag"],t,r)})).then(__importStar).then((function(e){return e.ReportFlag}))}};t.AsyncReportFlag=r.Loadable(n)})),define("modules/clean/bug_reporting/routing",["require","exports","tslib","react"],(function(e,t,r,n){"use strict";var i,o;Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),i||(i={});var a=window.currentBugScopes;a?o=a:window.currentBugScopes=o={nextId:0,scopes:{}},t.getBugScopes=function(){return Object.values(o.scopes)},t.RegisterComponentWithBugReporter=function(e){var t=e.componentId,r=e.componentName,i=e.children;return n.useEffect((function(){var e=(function(e,t){var r=o.nextId;return o.nextId++,o.scopes[r]={componentId:e,componentName:t},r})(t,r);return function(){return t=e,void delete o.scopes[t];var t}}),[t,r]),n.default.createElement(n.default.Fragment,null,i)},t.RegisterComponentWithBugReporter.displayName="RegisterComponentWithBugReporter"})),define("modules/clean/cloud_docs/shared_components/dynamic_routing_modal",["require","exports","tslib","modules/clean/react/modal","modules/clean/cloud_docs/open_with_utils","modules/clean/static_urls","modules/clean/react/css","react","modules/core/i18n","spectrum/button","modules/clean/cloud_docs/event_logging","modules/clean/cloud_docs/types"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=(function(e){function t(t){var r=e.call(this,t)||this;return r.editorToString={preview:l.intl.formatMessage({defaultMessage:"Dropbox Preview"}),word:l.intl.formatMessage({defaultMessage:"Word for the web"}),excel:l.intl.formatMessage({defaultMessage:"Excel for the web"}),powerpoint:l.intl.formatMessage({defaultMessage:"PowerPoint for the web"}),gdoc:l.intl.formatMessage({defaultMessage:"Google Docs"}),gsheet:l.intl.formatMessage({defaultMessage:"Google Sheets"}),gslides:l.intl.formatMessage({defaultMessage:"Google Slides"})},r.state={set_routing_dest:!1},r}return r.__extends(t,e),t.prototype.componentDidMount=function(){u.logUserAction({actionEvent:d.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor}})},t.prototype.componentWillUnmount=function(){if(!this.state.set_routing_dest){u.logUserAction({actionEvent:d.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor,routingDest:"Dismissed"}}),this.setState({set_routing_dest:!1})}},t.prototype.render=function(){var e,t,r,a,p,m=this,f=this.editorToString[this.props.editorWithLock],_=this.editorToString[this.props.currentEditor],v=l.intl.formatMessage({defaultMessage:"Want to see the latest version and edit?"});"preview"===this.props.currentEditor?(a="active-editor-discovered-on-preview",r="/static/images/cloud_docs/dynamic_routing/active-editor-discovered-on-preview-vflgDu-Pd.png",t=l.intl.formatMessage({defaultMessage:"Open in {editor_with_lock_string}"},{editor_with_lock_string:f}),e=l.intl.formatMessage({defaultMessage:"Right now people are working on this file in {editor_with_lock_string}. You can see updates and edit there."},{editor_with_lock_string:f})):(a="active-editor-discovered-on-edit",r="/static/images/cloud_docs/dynamic_routing/active-editor-discovered-on-edit-vflJsv-0D.png",this.props.isLockEditorEnabled?(t=l.intl.formatMessage({defaultMessage:"Edit in {editor_with_lock_string}"},{editor_with_lock_string:f}),e=l.intl.formatMessage({defaultMessage:"Because this file is already open in {editor_with_lock_string}, you can only see updates and edit there."},{editor_with_lock_string:f})):(v=l.intl.formatMessage({defaultMessage:"You canâ€™t edit this file right now"}),e=l.intl.formatMessage({defaultMessage:"Someone is working on this file in {editor_with_lock_string}. However, your admin has disabled access to {editor_with_lock_string} in your organization."},{editor_with_lock_string:f})));var g,h=function(e,t){u.logUserAction({actionEvent:d.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:m.props.user.id,docPathOrId:m.props.file.file_id,data:{webOpenId:m.props.openId,origDest:m.props.currentEditor,routingDest:e}}),m.setState({set_routing_dest:!0});var r=window.self;i.getCloudEditorUrl(m.props.user.id,m.props.file.file_id).then((function(n){i.openCloudEditorUrl(n,r,m.props.file,m.props.user,e,t)})).catch((function(e){i.handleError(e)}))};if(this.props.showViewOnlyMode){var w=l.intl.formatMessage({defaultMessage:"View-Only in {current_editor}"},{current_editor:_});p=s.createElement("div",{className:"link-text"},s.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:function(){h(m.props.currentEditor,!0)}},w))}else if(!this.props.isLockEditorEnabled){w=l.intl.formatMessage({defaultMessage:"View-Only in Preview"});p=s.createElement("div",{className:"link-text"},s.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:function(){return n.Modal.close()}},w))}return g=this.props.isLockEditorEnabled?s.createElement("div",{className:"edit-buttons"},s.createElement(c.Button,{className:"main-button",onClick:function(){h(m.props.editorWithLock,!1)}},t),p):s.createElement("div",{className:"edit-buttons"},p),s.createElement(n.Modal,{id:"dynamic-routing",className:"dynamic-routing-modal",buttonComponent:g,displayCloseButton:!0,style:"clean"},s.createElement("div",{className:"default-dyn-routing-modal"},s.createElement("img",{className:a,alt:"",src:o.static_url(r)}),s.createElement("div",{className:"main-text"},v),s.createElement("div",{className:"sub-text"},e)))},t})((s=r.__importStar(s)).Component);t.DynamicRoutingModal=a.requireCssWithComponent(p,["/static/css/cloud_docs/dynamic_routing-vfl7wC_mz.css"]),t.showDynamicRoutingModal=function(e){n.Modal.showInstance(s.createElement(t.DynamicRoutingModal,r.__assign({},e)))}})),define("modules/clean/cloud_docs/shared_components/routing",["require","exports","tslib","modules/clean/cloud_docs/constants","modules/clean/previews/util","modules/clean/previews/util","modules/clean/cloud_docs/shared_components/dynamic_routing_modal","modules/clean/cloud_docs/cloud_doc_api_client","modules/clean/file_store/utils","modules/core/browser","modules/clean/cloud_docs/types"],(function(e,t,r,n,i,o,a,s,l,c,u){"use strict";var d,p,m,f,_;Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),c=r.__importStar(c);var v,g=((d={})[n.MicrosoftEditors.WORD]=!0,d[n.MicrosoftEditors.EXCEL]=!0,d[n.MicrosoftEditors.POWERPOINT]=!1,d[n.GoogleFileTypes.GOOGLE_DSS_SLIDES]=!1,d[n.GoogleFileTypes.GOOGLE_DSS_DOC]=!1,d[n.GoogleFileTypes.GOOGLE_DSS_SHEET]=!1,d.preview=!1,d);(function(e){e.pptx="pptx",e.docx="docx",e.xlsx="xlsx"})(v||(v={}));var h=((p={})[3503728]=((m={})[v.pptx]=n.GoogleFileTypes.GOOGLE_DSS_SLIDES,m[v.docx]=n.GoogleFileTypes.GOOGLE_DSS_DOC,m[v.xlsx]=n.GoogleFileTypes.GOOGLE_DSS_SHEET,m),p[661085]=((f={})[v.pptx]=n.MicrosoftEditors.POWERPOINT,f[v.docx]=n.MicrosoftEditors.WORD,f[v.xlsx]=n.MicrosoftEditors.EXCEL,f),p),w=((_={})[3503728]=u.CloudDocProviderIntegration.GDD_INTEGRATION,_);function y(e,t){if(e)switch(e.toLowerCase()){case"google_docs":case"gdoc":return n.GoogleFileTypes.GOOGLE_DSS_DOC;case"google_slides":case"gslides":return n.GoogleFileTypes.GOOGLE_DSS_SLIDES;case"google_sheets":case"gsheet":return n.GoogleFileTypes.GOOGLE_DSS_SHEET;case"wopi":return i.isPptExtension(t)?n.MicrosoftEditors.POWERPOINT:o.isWordDocExtension(t)?n.MicrosoftEditors.WORD:n.MicrosoftEditors.EXCEL;case"paper":return t;case"word":case"excel":case"powerpoint":return e;default:return}}t.maybeShowDynamicRoutingModal=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){return i=n,s.getLockProviderAsync(e.id,t.file_id).then((function(r){var o=r.app_id;if(o&&h[o][i]&&(l.isBrowseFile(t)||l.isSharedFile(t))){var d=c.get_uri().getQuery().web_open_id,p=y(c.get_uri().getQuery().from_editor,n)||"preview",m={editorWithLock:h[o][i],currentEditor:p,file:t,user:e,showViewOnlyMode:g[p],openId:d,isLockEditorEnabled:!0};e.is_team?s.getTeamSettings(e.id).then((function(e){var t=e.settings;if(w.hasOwnProperty(o)){var r=w[o];m.isLockEditorEnabled=t[r][".tag"]===u.IntegrationCreateAndEdit[".tag"]}("preview"!==m.currentEditor||m.isLockEditorEnabled)&&a.showDynamicRoutingModal(m)})):a.showDynamicRoutingModal(m)}})),[2]}))}))},t.getCloudEditorString=y})),define("modules/clean/image_preview_util",["require","exports","tslib","jquery"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n);var i={PREVIEW_IMAGE_CONTAINER:"preview-image-container",PREVIEW_IMAGE_WRAPPER:"preview-image-wrapper",PREVIEW_IMAGE:"preview-image",getPreviewImageContainer:function(){return n.default("."+this.PREVIEW_IMAGE_CONTAINER)},getPreviewImageWrapper:function(){return n.default("."+this.PREVIEW_IMAGE_WRAPPER)},getPreviewImage:function(){return this.getPreviewImageContainer().find("."+this.PREVIEW_IMAGE)},getPreviewImageElement:function(){return this.getPreviewImage()[0]}};t.default=i})),define("modules/clean/image_size",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[["480x320",480,320],["640x480",640,480],["800x600",800,600],["1024x768",1024,768],["1280x960",1280,960],["1600x1200",1600,1200],["2048x1536",2048,1536]];t.imageBestFitSize=function(e,t){for(var n=0,i=r;n<i.length;n++){var o=i[n],a=o[0],s=o[1],l=o[2];if(s>=e||l>=t)return a}return r[r.length-1][0]}})),define("modules/clean/integrations/zoom_share_dialog/async_modal",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowModal=function(t,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,r){e(["modules/clean/integrations/zoom_share_dialog/modal"],t,r)})).then(r.__importStar)];case 1:return(0,a.sent().showModal)(t,n,i,o||"web"),[2]}}))}))}})),define("modules/clean/loggers/file_preview_logger",["require","exports","tslib","modules/clean/ajax","modules/clean/react/file_viewer/constants","modules/clean/react/previews/constants","modules/clean/web_timing_logger","modules/constants/request","modules/core/browser"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),a=r.__importStar(a),s=r.__importStar(s),l=r.__importStar(l);var c={};c[i.EventType.FilePreviewSessionEnded]="preview_session_ended",c[i.EventType.FilePreviewAttemptStarted]="preview_attempted",c[i.EventType.FilePreviewSupportConfirmed]="support_confirmed",c[i.EventType.FilePreviewSupportDenied]="support_denied",c[i.EventType.FilePreviewDownloadAttempted]="download_attempted",c[i.EventType.FilePreviewDownloadSucceeded]="download_succeeded",c[i.EventType.FilePreviewDownloadFailed]="download_failed",c[i.EventType.FilePreviewRenderSucceeded]="render_succeeded",c[i.EventType.FilePreviewRenderFailed]="render_failed",c[i.EventType.FilePreviewFidelitySurveyAsked]="fidelity_survey_asked",c[i.EventType.FilePreviewFidelitySurveyAnswered]="fidelity_survey_answered",c[i.EventType.FilePreviewFidelitySurveyDismissed]="fidelity_survey_dismissed",c[i.EventType.FilePreviewUserAction]="user_action",c[i.EventType.ArchivePreviewContentsScanned]="archive_contents_scanned",c[i.EventType.FilePreviewModeDetermined]="file_preview_mode_determined",c[i.EventType.FilePreviewModeBounce]="file_preview_mode_bounce",c[i.EventType.SidebarPaneSelected]="sidebar_pane_selected",c[i.EventType.SidebarModeSelected]="sidebar_mode_selected",c[i.EventType.SidebarOpened]="sidebar_opened",c[i.EventType.SidebarClosed]="sidebar_closed",c[i.EventType.SidebarCollapsedShareClicked]="sidebar_collapsed_share_clicked",c[i.EventType.SidebarOpenedShareClicked]="sidebar_opened_share_clicked",c[i.EventType.FilePreviewUpsellClicked]="preview_upsell_clicked",c[i.EventType.FilePreviewUpsellExposed]="preview_upsell_exposed",c[i.EventType.PersistentHeaderShown]="persistent_header_shown",c[i.EventType.PersistentFooterShown]="persistent_footer_shown",c[i.EventType.PostDownloadModalShown]="post_download_modal_shown";var u=(function(){function e(){this._eventHandlers={}}return e.prototype._getSerializedTimeline=function(e){return null},e.prototype.addEventHandlers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var i=n[r],o=i[0],a=i[1];this._eventHandlers[o]=a}},e.prototype._log=function(e,t,r){void 0===r&&(r={});var i=this._getSerializedTimeline(t),o={device_type:t.fileViewerSession.deviceType,event_name:c[e],extra:JSON.stringify(r),file_viewer_session_id:t.fileViewerSession.id,file_preview_session_id:t.id,file_ns_id:t.file.ns_id,file_sjid:t.file.sjid,file_preview_timeline:i?JSON.stringify(i):null,file_preview_size:t.previewSize};n.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:o})},e.prototype.listenTo=function(e){for(var t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){var r=this._eventHandlers[t];e.addListener(t,r)}},e.prototype.unlistenTo=function(e){for(var t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){var r=this._eventHandlers[t];e.removeListener(t,r)}},e})(),d=(function(e){function t(){var t=e.call(this)||this;return t._logAsked=function(e){t._log(i.EventType.FilePreviewFidelitySurveyAsked,e)},t._logAnswered=function(e,r){t._log(i.EventType.FilePreviewFidelitySurveyAnswered,e,r)},t._logDismissed=function(e,r){t._log(i.EventType.FilePreviewFidelitySurveyDismissed,e,r)},t.addEventHandlers([i.EventType.FilePreviewFidelitySurveyAsked,t._logAsked],[i.EventType.FilePreviewFidelitySurveyAnswered,t._logAnswered],[i.EventType.FilePreviewFidelitySurveyDismissed,t._logDismissed]),t}return r.__extends(t,e),t.prototype._log=function(t,r,n){void 0===n&&(n={}),n._client_time=+Date.now();var i=r.sourceContext,o=r.sourceAction;i&&(n._source_context=i),o&&(n._source_action=o),e.prototype._log.call(this,t,r,n)},t})(u);t.FilePreviewFidelitySurveyLogger=d;var p=(function(e){function t(t){var r=e.call(this)||this;return r._handleFilePreviewAttemptStarted=function(e,t){r._handleEvent(i.EventType.FilePreviewAttemptStarted,e,t)},r._handleFilePreviewSupportConfirmed=function(e,t){r._handleEvent(i.EventType.FilePreviewSupportConfirmed,e,t)},r._handleFilePreviewSupportDenied=function(e,t){r._handleEvent(i.EventType.FilePreviewSupportDenied,e,t)},r._handleFilePreviewDownloadAttempted=function(e,t){r._handleEvent(i.EventType.FilePreviewDownloadAttempted,e,t)},r._handleFilePreviewDownloadSucceeded=function(e,t){r._handleEvent(i.EventType.FilePreviewDownloadSucceeded,e,t)},r._handleFilePreviewDownloadFailed=function(e,t){r._handleEvent(i.EventType.FilePreviewDownloadFailed,e,t)},r._handleFilePreviewRenderSucceeded=function(e,t){r._handleEvent(i.EventType.FilePreviewRenderSucceeded,e,t)},r._handleFilePreviewRenderFailed=function(e,t){r._handleEvent(i.EventType.FilePreviewRenderFailed,e,t)},r._handleFilePreviewSessionEnded=function(e,t){r._handleEvent(i.EventType.FilePreviewSessionEnded,e,t)},r._filePreviewSessionId=t,r.addEventHandlers([i.EventType.FilePreviewAttemptStarted,r._handleFilePreviewAttemptStarted],[i.EventType.FilePreviewSupportConfirmed,r._handleFilePreviewSupportConfirmed],[i.EventType.FilePreviewSupportDenied,r._handleFilePreviewSupportDenied],[i.EventType.FilePreviewDownloadAttempted,r._handleFilePreviewDownloadAttempted],[i.EventType.FilePreviewDownloadSucceeded,r._handleFilePreviewDownloadSucceeded],[i.EventType.FilePreviewDownloadFailed,r._handleFilePreviewDownloadFailed],[i.EventType.FilePreviewRenderSucceeded,r._handleFilePreviewRenderSucceeded],[i.EventType.FilePreviewRenderFailed,r._handleFilePreviewRenderFailed],[i.EventType.FilePreviewSessionEnded,r._handleFilePreviewSessionEnded]),r}return r.__extends(t,e),t.prototype._handleEvent=function(e,t,r){if(void 0===r&&(r={}),this._filePreviewSessionId===t.id){r.preview_type=t.previewType,r.file_preview_timeline=JSON.stringify(this._getSerializedTimeline(t)),r.web_timing_logger_req_id=s.REQUEST_ID,r.source_context=t.sourceContext,r.source_action=t.sourceAction,null!=t.primaryMarkTs&&(r.primary_mark_ts=t.primaryMarkTs,r.time_to_primary_mark=t.timeToPrimaryMark());var n=a.start_time();if(null!=t.lastEvent&&(r.last_event=c[t.lastEvent]),t.sourceAction===o.PreviewSourceAction.Visit&&e===i.EventType.FilePreviewRenderSucceeded){var u=a.time_to_interactive();null!=u&&null!=n&&(r.time_to_interactive=u-n);var d=l.performance();if(null!=d){var p=d.timing;null!=p&&null!=n&&(r.time_to_first_byte=p.responseStart-n,r.web_timing_data=JSON.stringify(p))}window._timingData&&window._timingData.img&&(delete window._timingData.img.dl_error_finish,r.img_timing_data=JSON.stringify(window._timingData.img))}e===i.EventType.FilePreviewSessionEnded&&(r.password_needed=t.passwordNeeded),this._log(e,t,r)}},t.prototype._getSerializedTimeline=function(e){var t={};for(var r in e.previewTimeline)if(e.previewTimeline.hasOwnProperty(r)){var n=e.previewTimeline[r];t[this._timelineKey(r)]=n.timestamp}return t},t.prototype._timelineKey=function(e){return c[e]+"_ts"},t})(u);t.FilePreviewTimelineLogger=p;var m=(function(e){function t(){var t=e.call(this)||this;return t.logContentsScanned=function(e,r){t._log(i.EventType.ArchivePreviewContentsScanned,e,r)},t.addEventHandlers([i.EventType.ArchivePreviewContentsScanned,t.logContentsScanned]),t}return r.__extends(t,e),t})(u);t.FilePreviewArchiveLogger=m;var f=(function(e){function t(){var t=e.call(this)||this;return t._logUpsellExposed=function(e){t._log(i.EventType.FilePreviewUpsellExposed,e)},t._logUpsellClicked=function(e){t._log(i.EventType.FilePreviewUpsellClicked,e)},t.addEventHandlers([i.EventType.FilePreviewUpsellExposed,t._logUpsellExposed],[i.EventType.FilePreviewUpsellClicked,t._logUpsellClicked]),t}return r.__extends(t,e),t})(u);t.FilePreviewUpsellLogger=f;var _=(function(e){function t(){var t=e.call(this)||this;return t._logPersistentHeaderShown=function(e){t._log(i.EventType.PersistentHeaderShown,e)},t._logPersistentFooterShown=function(e){t._log(i.EventType.PersistentFooterShown,e)},t._logPostDownloadModalShown=function(e){t._log(i.EventType.PostDownloadModalShown,e)},t.addEventHandlers([i.EventType.PersistentHeaderShown,t._logPersistentHeaderShown],[i.EventType.PersistentFooterShown,t._logPersistentFooterShown],[i.EventType.PostDownloadModalShown,t._logPostDownloadModalShown]),t}return r.__extends(t,e),t})(u);t.FilePreviewConversionLogger=_;var v=(function(e){function t(){var t=e.call(this)||this;return t._logUserAction=function(e,r,n,o){o.action=r,o.context=n,t._log(i.EventType.FilePreviewUserAction,e,o)},t.addEventHandlers([i.EventType.FilePreviewUserAction,t._logUserAction]),t}return r.__extends(t,e),t})(u);t.FilePreviewUserActionLogger=v;var g=(function(e){function t(){var t=e.call(this)||this;return t.determinedTime=0,t.bounceLogged=!1,t.logDetermined=function(e,r){t.determinedTime=Date.now(),t._log(i.EventType.FilePreviewModeDetermined,e,r)},t.logBounce=function(e){if(!t.bounceLogged&&0!==t.determinedTime){t.bounceLogged=!0;var r=Date.now()-t.determinedTime;t._log(i.EventType.FilePreviewModeBounce,e,{time:r})}},t.addEventHandlers([i.EventType.FilePreviewModeDetermined,t.logDetermined],[i.EventType.FilePreviewModeBounce,t.logBounce]),t}return r.__extends(t,e),t})(u);t.FilePreviewModeLogger=g;var h=(function(e){function t(){var t=e.call(this)||this;return t.logSidebarPaneSelected=function(e,r){t._log(i.EventType.SidebarPaneSelected,e,r)},t.logSidebarModeSelected=function(e,r){t._log(i.EventType.SidebarModeSelected,e,r)},t.logSidebarOpened=function(e){t._log(i.EventType.SidebarOpened,e)},t.logSidebarClosed=function(e){t._log(i.EventType.SidebarClosed,e)},t.logSidebarCollapsedShareClicked=function(e){t._log(i.EventType.SidebarCollapsedShareClicked,e)},t.logSidebarOpenedShareClicked=function(e){t._log(i.EventType.SidebarOpenedShareClicked,e)},t.addEventHandlers([i.EventType.SidebarPaneSelected,t.logSidebarPaneSelected],[i.EventType.SidebarModeSelected,t.logSidebarModeSelected],[i.EventType.SidebarOpened,t.logSidebarOpened],[i.EventType.SidebarClosed,t.logSidebarClosed],[i.EventType.SidebarCollapsedShareClicked,t.logSidebarCollapsedShareClicked],[i.EventType.SidebarOpenedShareClicked,t.logSidebarOpenedShareClicked]),t}return r.__extends(t,e),t})(u);t.FilePreviewSidebarLogger=h})),define("modules/clean/loggers/file_viewer_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/file_store/utils","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n);var s={Overall:"viewer_overall_time","Page Request":"viewer_page_request_time",Rendering:"viewer_rendering_time"};t.logPageRendered=function(e,t){e=e;for(var o=i.getExtension(e),a=r.__assign(r.__assign({},t.attributes),{total_time:-1,file_ext:o,source:"file-viewer",originalSize:null!=e.bytes?e.bytes:0}),l=0,c=t.stats;l<c.length;l++){var u=c[l];a[s[u.name]]=u.end-u.start}return n.UserActivityLogger.stop("web","file_view_first_page_rendered",a),n.PreviewActivityLogger.stop("file_view_first_page_rendered",{file_ext:o,extra:JSON.stringify(a)})},t.logView=function(e,t,r,n,i,s,l,c){void 0===l&&(l=!1),void 0===c&&(c=!1);var u=s?{url:s}:void 0,d={file_views:[{file_info:{file_identifier:e.file_id,shared_link_details:u},platform_type:{".tag":"web"},origin:n,action:i}]};return t?(new o.UserApiV2Client).ns("seen_state").rpc("log_file_view",d,{subjectUserId:t.id}):(new a.NoAuthApiV2Client).ns("seen_state").rpc("logged_out/log_file_view",d,{})}})),define("modules/clean/loggers/video_preview_logger",["require","exports","tslib","modules/clean/ajax","modules/clean/perf_tools/web_timing_utils"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n);var o=(function(){function e(e,t){this.videoTruncated=!1,this.filePreviewSessionId=t?t.id:"",this.videoFormat=e}return e.prototype.populateVideoDuration=function(e){this.videoDuration=Math.round(e)},e.prototype.setVideoTruncated=function(){this.videoTruncated=!0},e.prototype.logEvent=function(e,t){var r={event_name:e,client_timestamp_ms:i.WebTimingUtil.getNow(),file_preview_session_id:this.filePreviewSessionId,video_format:this.videoFormat,video_duration_seconds:this.videoDuration,video_truncated:this.videoTruncated,extra:t?JSON.stringify(t):void 0};n.SilentBackgroundBeaconRequest({url:"/log/video_preview",data:r})},e})();t.VideoPreviewLogger=o})),define("modules/clean/logging/hive/schemas/web-comments2",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.category="web-comments2",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.event=e.event,this.comment_gid=e.comment_gid,this.thread_gid=e.thread_gid,this.stream_gid=e.stream_gid,this.timestamp=Math.floor(Date.now()/1e3),this.is_annotation=e.is_annotation,this.time_comment_offset=e.time_comment_offset,this.file_extension=e.file_extension,this.file_obj_id=e.file_obj_id,this.platform=e.platform,this.oref_name=e.oref_name,this.ns_id=e.ns_id,this.file_size=e.file_size,this.error_message=e.error_message,this.annotation_type=e.annotation_type,this.page=e.page,this.referral_source=e.referral_source,this.product_surface=e.product_surface,this.is_mobile=e.is_mobile,this.annotation_position=e.annotation_position,this.is_third_party=e.is_third_party,Object.seal(this)};t.Comments2LoggingTableRow=r})),define("modules/clean/logging/hive/schemas/web-workflows",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.category="web-workflows",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_id=null,this.event_name=e.event_name,this.source_context=e.source_context,this.device_type=e.device_type,this.milestone=e.milestone,this.app_id=e.app_id,this.ns_id=e.ns_id,this.file_obj_id=e.file_obj_id,this.file_viewer_session_id=e.file_viewer_session_id,this.file_preview_session_id=e.file_preview_session_id,this.file_size=e.file_size,this.file_preview_size=e.file_preview_size,this.file_extension=e.file_extension,this.platform=e.platform,this.extra=e.extra,Object.seal(this)};t.WebWorklowsLoggingTableRow=r})),define("modules/clean/mouse_button_code",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.LEFT=0]="LEFT"})(t.MouseButtonCode||(t.MouseButtonCode={}))})),define("modules/clean/previews/actions",["require","exports","tslib","modules/clean/referrer_cleansing_redirect","modules/core/i18n"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.imagePrint=function(e){var t=window.open("about:blank");if(!t)throw new Error(i.intl.formatMessage({defaultMessage:"Could not open new window"}));window.setTimeout((function(){var r=t.document.createElement("style");r.innerHTML="\n      @page { margin: 0;}\n      img { max-width: 100%; max-height: 100%}\n    ",t.document.head.appendChild(r);var n=t.document.createElement("img");n.src=e,n.onload=function(){t.print()},n.onerror=function(){t.close()},t.document.body.appendChild(n)}),50)},t.docPrint=function(e){n.safe_open_tab_and_redirect(e)}})),define("modules/clean/previews/util",["require","exports","tslib","modules/core/browser","modules/clean/analytics","modules/clean/datetime","modules/clean/filepath","modules/clean/previews/constants","modules/clean/cloud_docs/constants","modules/clean/file_store/utils","modules/clean/react/previews/constants","file-viewer/core","modules/constants/file_viewer","modules/core/uri"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,m){"use strict";function f(e,t){var r={};return r._subject_uid=String(t),e.updateQuery(r)}function _(e,t){return f(new m.URI({path:"/history"+e.fq_path}),t.id)}function v(e){return p.PRESENTATION_EXTS.map((function(e){return e.slice(1)})).includes(e)}function g(e){return["doc","docm","docx"].includes(e)}function h(e){return["odp","odt","rtf","wpd"].includes(e)}function w(e,t){var r=Number.MAX_VALUE;if("pdf"===e)r=Number(524288e3);else if(g(e)||h(e))r=s.MAX_WORD_DOC_FILE_SIZE_B;else if(v(e))r=s.MAX_PPT_FILE_SIZE_B;else if(t===s.PreviewType.Archive)r=s.MAX_ARCHIVE_FILE_SIZE_B;else if(t===s.PreviewType.HTML||t===s.PreviewType.Text)r=Number(8388608);else{if(t!==s.PreviewType.Linkfile)return;r=Number(10485760)}return r}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),a=r.__importStar(a),p=r.__importStar(p),t.getIframeQuery=function(){return".react-file-viewer__preview iframe"},t.shouldShowPlatformInfo=function(){return p.PASS_PLATFORM_INFO},t.is_excel2_file=function(e){return["xls","csv","ods"].indexOf(e.substring(0,3))>-1},t.getWhitelistedExtension=function(e){var t=a.file_extension(e);return p.LOGGING_WHITELISTED_EXTS.includes("."+t)?t:p.LOGGING_EXT_PLACEHOLDER},t.getWhitelistedExtensionFromFile=function(e){var t=c.getExtension(e);return p.LOGGING_WHITELISTED_EXTS.includes("."+t)?t:p.LOGGING_EXT_PLACEHOLDER},t.normalize_extension=function(e){if("indd"===e)return e;var t=e.substring(0,3);switch(t){case"rtf":case"odt":case"wpd":return"doc";case"pps":case"odp":return"ppt";case"csv":case"ods":return"xls";default:return t}},t.getModifierString=function(e){if(e.ts)return o.getActingTime(1e3*e.ts)},t.getCapitalizedModifierString=function(e){if(e.ts)return o.getActingTime(1e3*e.ts,!1,!1,-1,!1,!0)},t.getCompactDateTimeString=function(e){if(e.ts)return o.getActingTime(1e3*e.ts,!1,!0,-1,!1,!0)},t.getCompactLowerCaseDateTimeString=function(e){if(e.ts)return o.getActingTime(1e3*e.ts,!1,!0,-1,!1,!1)},t.getDateTimeFromUTCString=function(e){if(e){var t=new Date(e);return o.getActingTime(t.getTime(),!1,!0,-1,!1,!0)}},t.update_url_for_annotation=function(e){return e=(e=e.updateQuery({annotation_highlight:"1"})).updateQuery({annotation_region:"1"})},t.update_url_with_user_id=f,t.getVersionHistoryUrl=_,t.redirectToVersionHistory=function(e,t){i.UserActivityLogger.log("web","view_version_history");var r=_(e,t);n.redirect(r.toString())},t.VALID_PREVIEW_TYPES=[s.PreviewType.Archive,s.PreviewType.Audio,s.PreviewType.CloudDoc,s.PreviewType.Excel,s.PreviewType.HTML,s.PreviewType.Image,s.PreviewType.Linkfile,s.PreviewType.Other,s.PreviewType.SsrDoc,s.PreviewType.RawHTML,s.PreviewType.Restricted,s.PreviewType.Video,s.PreviewType.Doc,s.PreviewType.Photo,s.PreviewType.Text],t.isPptExtension=v,t.isWordDocExtension=g,t.isLibreOfficeExtension=h,t.getFileSizeLimit=w,t.filesizeSupported=function(e,t){var r=e.bytes;if(void 0===r)return!0;var n=w(c.getExtension(e),t);return!n||r<=n},t.isEmptyFile=function(e){return 0===e.bytes},t.mapRivieraStatusToErrorType=function(e){var t=u.ErrorType.LoadError;return e===d.RivieraStatus.TooBig?t=u.ErrorType.FileSizeError:e===d.RivieraStatus.PasswordProtected&&(t=u.ErrorType.PasswordProtectedError),t},t.iOSIframeScrollStyles=function(){return{overflow:"auto","-webkit-overflow-scrolling":"touch"}},t.tagCriticalPathContentRequest=function(e,t){return e&&t?m.URI.parse(e).updateQuery({psid:t.id}).toString():e},t.isLimitedPreview=function(e,t){return s.IworkExtensions.includes(c.getExtension(e))&&!e.is_dir&&t===s.PreviewType.Image},t.isSupportedBundleFile=function(e){return s.IworkExtensions.includes(c.getExtension(e))},t.isCloudDocPreview=function(e){return e.preview_type===s.PreviewType.CloudDoc||l.isCloudDocByExtension(c.getExtension(e))}})),define("modules/clean/react/comments2/components/annotations/empty_layer",["require","exports","tslib","react"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.EmptyLayer=function(e){return n.default.createElement("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0}},e.children)}}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/comments2/components/annotations/loadable",["require","exports","modules/clean/react/async/loadable","modules/clean/react/comments2/components/annotations/empty_layer"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationViewLayer=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/comments2/components/annotations/annotation_view_layer"],t,r)})).then(__importStar).then((function(e){return e.AnnotationViewLayer}))}}),t.AnnotationConductorLayer=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/comments2/components/annotations/annotation_conductor_layer"],t,r)})).then(__importStar).then((function(e){return e.AnnotationConductorLayer}))},loading:n.EmptyLayer}),t.AnnotationInstructionalTooltipPane=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/comments2/components/annotations/annotation_instructional_tooltip_pane"],t,r)})).then(__importStar).then((function(e){return e.AnnotationInstructionalTooltipPane}))},loading:n.EmptyLayer})})),define("modules/clean/react/comments2/components/mobile_web_comments",["require","exports","tslib","react","external/lodash","modules/clean/web_timing_logger","modules/clean/react/async/loadable"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),i=r.__importStar(i),t.AsyncManagedCommentsTab=a.Loadable({loader:function(){return o.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/file_sidebar/managed_comments_tab"],t,r)})).then(r.__importStar).then((function(e){return e.ManagedCommentsTab}))}))}}),t.MobileWebComments=function(e){return n.default.createElement(t.AsyncManagedCommentsTab,r.__assign({},e,{collapsed:!1,fileSidebarDispatch:i.noop,isMobile:!0,isVersionHistoryMode:!1}))}})),define("modules/clean/react/comments2/components/snackbars",["require","exports","tslib","react","modules/clean/react/snackbar","modules/core/i18n"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n);var a=o.intl.formatMessage({defaultMessage:"Close",description:"Button to dismiss snackbar message"}),s=o.intl.formatMessage({defaultMessage:"Retry",description:"Button to retry a failed action"});t.showSuccessSnackbar=function(e){var t=e.message,r=n.default.createElement(i.Snackbar,{title:t,variant:"complete",closeButtonText:a,id:"comments2"});i.Snackbar.show(r)},t.showErrorSnackbar=function(e){var t=e.message,r=e.retryFn,o=r?n.default.createElement(i.Snackbar,{title:t,variant:"fail",closeButtonText:a,actionButtonText:s,onActionClick:function(){r(),i.Snackbar.close()},id:"comments2"}):n.default.createElement(i.Snackbar,{title:t,variant:"fail",closeButtonText:a,id:"comments2"});i.Snackbar.show(o)}})),define("modules/clean/react/comments2/data/api",["require","exports","tslib","modules/clean/api_v2/error","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client","modules/core/exception"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importStar(a);var s=function(e,t,r){this.code=e,this.message=t,this.apiError=r};function l(e,t){if(e instanceof n.ApiError){var r=t;return e.message&&(r+=". Detailed message: "+e.message.toString()),new s(e.error[".tag"],r,e)}return e}function c(e){var t={".tag":e.type};return e.linkUrl?{type:t,identifier:{".tag":"shared_link_details",url:e.linkUrl}}:{type:t,identifier:{".tag":"file_path_or_id",file_path_or_id:e.id}}}t.Comments2Error=s,(function(e){e.FILE_NOT_FOUND="file_not_found",e.PERMISSION_DENIED="permission_denied",e.BAD_REQUEST="bad_request"})(t.ErrorCode||(t.ErrorCode={}));var u=(function(){function e(e){this.routes=(new o.NoAuthApiV2Client).ns("comments2"),this.params={},this.stream=c(e)}return e.prototype.listComments=function(e,t){return void 0===e&&(e=!1),this.routes.rpc("logged_out/list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch((function(e){throw l(e,"/logged_out/list_comments did not complete successfully")}))},e.prototype.logPerfEvent=function(e,t,r){return void 0===r&&(r={}),this.logPerfEventImpl(e,t,r)},e.prototype.logPerfEventImpl=function(e,t,r){var n=r.threadId,i=r.commentId,o=r.oref,s=r.errorMessage,c={event:e,value:t,stream:this.stream,thread_id:n,comment_id:i,error_message:s,oref:o};return this.routes.rpc("log_perf_event",c,this.params).catch((function(e){throw a.reportStack("comments2 perf logging failed",{severity:a.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:c}),l(e,"/log_perf_event did not complete successfully")}))},e})();t.Comments2LoggedOutApi=u;var d=(function(){function e(e,t){var r=new i.UserApiV2Client;this.routes=r.ns("comments2"),this.stickerRoutes=r.ns("stickers"),this.params={subjectUserId:e},this.stream=c(t)}return e.prototype.getStickers=function(){return this.stickerRoutes.rpc("get_stickers",void 0,this.params).catch((function(e){throw l(e,"/get_stickers did not complete successfully")}))},e.prototype.checkOnboardingStatus=function(){return this.routes.rpc("check_onboarding_status",void 0,this.params).catch((function(e){throw l(e,"/check_onboarding_status did not complete successfully")}))},e.prototype.createThread=function(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,source:t},this.params).catch((function(e){throw l(e,"/add_comment (new comment) did not complete successfully")}))},e.prototype.deleteComment=function(e){return this.routes.rpc("delete_comment",{stream:this.stream,id:e},this.params).catch((function(e){throw l(e,"/delete_comment did not complete successfully")}))},e.prototype.disableCommenting=function(){return this.routes.rpc("disable_commenting",{stream:this.stream},this.params).catch((function(e){throw l(e,"/disable_commenting did not complete successfully")}))},e.prototype.editComment=function(e,t){return this.routes.rpc("edit_comment",{stream:this.stream,id:e,comment:t},this.params).catch((function(e){throw l(e,"/edit_comment did not complete successfully")}))},e.prototype.enableCommenting=function(){return this.routes.rpc("enable_commenting",{stream:this.stream},this.params).catch((function(e){throw l(e,"/enable_commenting did not complete successfully")}))},e.prototype.listComments=function(e,t){return void 0===e&&(e=!1),this.routes.rpc("list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch((function(e){throw l(e,"/list_comments did not complete successfully")}))},e.prototype.logPerfEvent=function(e,t){return this.logPerfEventImpl(e,t)},e.prototype.logSimplePerfEvent=function(e,t){return this.logPerfEvent({".tag":e},t)},e.prototype.logPerfEventImpl=function(e,t){var r={event:e,value:t,stream:this.stream};return this.routes.rpc("log_perf_event",r,this.params).catch((function(e){throw a.reportStack("comments2 perf logging failed",{severity:a.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:r}),l(e,"/log_perf_event did not complete successfully")}))},e.prototype.markHasOnboarded=function(e){var t={".tag":e};return this.routes.rpc("mark_has_onboarded",{type:t},this.params).catch((function(e){throw l(e,"/mark_has_onboarded did not complete successfully")}))},e.prototype.markThreadRead=function(e){return this.routes.rpc("mark_thread_read",{stream:this.stream,id:e},this.params).catch((function(e){throw l(e,"/mark_thread_read did not complete successfully")}))},e.prototype.markThreadUnread=function(e){return this.routes.rpc("mark_thread_unread",{stream:this.stream,id:e},this.params).catch((function(e){throw l(e,"/mark_thread_unread did not complete successfully")}))},e.prototype.markThreadResolved=function(e){return this.routes.rpc("resolve_thread",{stream:this.stream,id:e},this.params).catch((function(e){throw l(e,"/resolve_thread did not complete successfully")}))},e.prototype.markThreadUnresolved=function(e){return this.routes.rpc("unresolve_thread",{stream:this.stream,id:e},this.params).catch((function(e){throw l(e,"/unresolve_thread did not complete successfully")}))},e.prototype.replyToThread=function(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,thread_id:t},this.params).catch((function(e){throw l(e,"/add_comment (reply comment) did not complete successfully")}))},e.prototype.subscribe=function(){return this.routes.rpc("subscribe",{stream:this.stream},this.params).catch((function(e){throw l(e,"/subscribe did not complete successfully")}))},e.prototype.unsubscribe=function(){return this.routes.rpc("unsubscribe",{stream:this.stream},this.params).catch((function(e){throw l(e,"/unsubscribe did not complete successfully")}))},e})();t.Comments2Api=d})),define("modules/clean/react/comments2/data/initial_state",["require","exports","modules/clean/react/comments2/data/types"],(function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={context:void 0,data:{editorIsEmpty:!0,threads:{},authors:{},activatedThreadId:void 0,documentRectangleToMakeVisible:void 0,hoverThreadId:void 0,cursor:void 0,modalVariantsShown:(n={},n[r.ModalVariant.EmailVerifyModal]=!1,n[r.ModalVariant.SignUpModal]=!1,n),onboardingVariants:{premium_av_comments_pane_surface:!1,premium_av_preview_surface:!1,non_premium_av_comments_pane_surface:!1,not_annotatable_file_comments_pane_surface:!1,how_to_at_mention_comments_pane_surface:!1,image_preview_surface:!1,document_preview_surface:!1,share_as_comment:!1},pendingAnnotationInfo:{playerCurrentTime:0,annotationMayBeOffscreen:!1},showResolved:!1,canSeeCommentEditor:!1,playerIntegrationEnabled:!1,enabledStatus:{canEnable:!1},subscriptionStatus:{canSubscribe:!1,isSubscribed:!1},requestEditorFocus:!1,visibleInSidebar:!0,perfEvents:{},upsellTooltipVariant:void 0,thirdPartySource:void 0,stickers:void 0},statuses:{}}})),define("modules/clean/react/comments2/data/logger",["require","exports","tslib","external/lodash","modules/clean/logging/hive/schemas/web-comments2","modules/clean/logging/telemetry","modules/clean/previews/util","modules/clean/react/comments2/data/util","modules/clean/react/comments2/util","modules/constants/python","modules/core/browser","modules/core/browser_detection"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";var p;function m(){var e=u.get_uri().getQuery().oref,t=n.findKey(c.OREF_CONSTANTS,(function(t){return t===e})),r={oref_name:t=t&&t.toLowerCase(),platform:"web",is_mobile:d.is_mobile_or_tablet(),product_surface:"file_preview"};return e===c.OREF_CONSTANTS.DESKTOP_HARMONY&&(r.referral_source="badge"),r}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),o=r.__importStar(o),u=r.__importStar(u),t.hiveLogger=new o.HiveLogger,(function(e){e.PageLevel="page-level",e.Targeted="targeted"})(p||(p={})),t.logEvent=function(e,n){var o=r.__assign({event:e},m());if(n){var c=n.commentId,u=n.stream,d=n.thread,f=n.threadId;c&&(o.comment_gid=c),f&&(o.thread_gid=f),d&&(o.thread_gid=d.id,o.is_annotation=!!d.annotation,o.is_third_party=d.isThirdParty,s.isThreadWithTimecodeAnnotation(d)&&(o.annotation_type="time",o.time_comment_offset=d.annotation.time),s.isThreadWithDocumentAnnotation(d)&&(o.annotation_type=d.annotation.regionType,o.page=d.annotation.regions[0].page,o.annotation_position=l.isFullPageAnnotation(d.annotation)?p.PageLevel:p.Targeted),s.isThreadWithImageAnnotation(d)&&(o.annotation_type="rectangle",o.annotation_position=l.isFullImageAnnotation(d.annotation)?p.PageLevel:p.Targeted)),u&&(o.stream_gid=u.id,o.file_obj_id=u.id,o.ns_id=u.ns_id,o.file_size=u.bytes,o.file_extension=a.getWhitelistedExtension(u.filename))}t.hiveLogger.log(new i.Comments2LoggingTableRow(o))},t.logErrorEvent=function(e,n){var o=n.stream,s=r.__assign({event:"comment_error",error_message:e},m());o&&(s.stream_gid=o.id,s.file_obj_id=o.id,s.ns_id=o.ns_id,s.file_size=o.bytes,s.file_extension=a.getWhitelistedExtension(o.filename)),t.hiveLogger.log(new i.Comments2LoggingTableRow(s))}})),define("modules/clean/react/comments2/data/perf_util",["require","exports"],(function(e,t){"use strict";function r(){return+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.threadActionCompleted=function(e,t){return{".tag":"thread_action_completed_ms",action:e,error_message:t}},t.commentActionCompleted=function(e,t){return{".tag":"comment_action_completed_ms",action:e,error_message:t}},t.mentionsQueryCompleted=function(){return{".tag":"mentions_query_completed_ms"}},t.currentTime=r,t.withTiming=function(e,t){var n=r();return function(i){e(i);var o=r()-n;t(o)}}})),define("modules/clean/react/comments2/data/reducer_helper",["require","exports","tslib","modules/clean/redux/types"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStatusReducer=function(e){for(var t={},i=0,o=Object.keys(e).map((function(t){return e[t]}));i<o.length;i++){var a=o[i];"async"===a.type&&(t[a.actionTypes.request]={name:a.name,status:n.ApiClientStatus.Request},t[a.actionTypes.error]={name:a.name,status:n.ApiClientStatus.Error})}return function(e,n){var i,o=t[n.type];return o&&(e=r.__assign(r.__assign({},e),((i={})[o.name]=o.status,i))),e}},t.createActionReducer=function(){return function(e,t){switch(e.type){case"async":return"function"==typeof t?[[e.actionTypes.success,t]]:[t.Error&&[e.actionTypes.error,t.Error],t.Request&&[e.actionTypes.request,t.Request],t.Success&&[e.actionTypes.success,t.Success]].filter((function(e){return e}));case"sync":if("function"==typeof t)return[[e.actionType,t]]}throw new Error}},t.createReducerFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},n=0,i=e;n<i.length;n++)for(var o=i[n],a=0,s=o;a<s.length;a++){var l=s[a],c=l[0],u=l[1];r[c]||(r[c]=[]),r[c].push(u)}return function(e,t){for(var n=0,i=r[t.type]||[];n<i.length;n++){var o=i[n],a=t.meta&&t.meta.args;e=o(e,"payload"in t?t.payload:t.error,a)}return e}}})),define("modules/clean/react/comments2/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Pending=0]="Pending",e[e.Comments1=1]="Comments1",e[e.Disabled=2]="Disabled",e[e.ReadOnly=3]="ReadOnly",e[e.FullyEnabled=4]="FullyEnabled"})(t.Comments2ContextStatus||(t.Comments2ContextStatus={})),(function(e){e.EmailVerifyModal="EmailVerifyModal",e.SignUpModal="SignUpModal"})(t.ModalVariant||(t.ModalVariant={})),(function(e){e[e.EditorFocus=0]="EditorFocus",e[e.OnPost=1]="OnPost"})(t.ShowModalReason||(t.ShowModalReason={})),(function(e){e.Chronological="CHRONOLOGICAL",e.VideoTimeCode="VIDEO_TIME_CODE"})(t.SortType||(t.SortType={})),(function(e){e[e.ThreadActivated=0]="ThreadActivated",e[e.UIButtonClicked=1]="UIButtonClicked"})(t.MarkThreadReadOrigin||(t.MarkThreadReadOrigin={}))})),define("modules/clean/react/comments2/data/util",["require","exports","tslib","modules/clean/react/comments2/util"],(function(e,t,r,n){"use strict";function i(e){var t=e.annotation;return!!t&&"document"===t.type}Object.defineProperty(t,"__esModule",{value:!0}),t.isThreadWithDocumentAnnotation=i,t.isThreadWithImageAnnotation=function(e){var t=e.annotation;return!!t&&"image"===t.type},t.isThreadWithTimecodeAnnotation=function(e){var t=e.annotation;return!!t&&n.isTimecodeAnnotation(t)},t.documentRectangleFromThread=function(e){if(e&&i(e)){var t=e.annotation.regions[0];return r.__assign(r.__assign({},t),{page:t.page-1})}}})),define("modules/clean/react/comments2/util",["require","exports","tslib","external/lodash","modules/core/browser_detection","modules/constants/comments2","modules/core/browser_detection"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n);function s(e){return function(t,r){return void 0===t||void 0===r?t===r:e(t,r)}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s((function(t,r){return e.every((function(e){return t[e]===r[e]}))}))}function c(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function u(e,t,r){return t<=e&&e<=r}t.createBackoff=function(e,t){void 0===e&&(e=1e3),void 0===t&&(t=3e5);var r,n=0;return{resetBackoff:function(){n=0,clearTimeout(r)},backoff:function(i){return r=setTimeout(i,Math.random()*Math.min(e*(Math.pow(2,n++)-1),t))}}},t.isUserSame=l("id"),t.isStreamSame=l("type","id"),t.isContextSame=s((function(e,r){return t.isStreamSame(e.stream,r.stream)&&t.isUserSame(e.viewer,r.viewer)})),t.findCommentThread=function(e,t){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=n.find(o.comments,{id:t});if(a)return{comment:a,thread:o}}return null},t.getAnnotationInfoForThread=function(e){var t=e.annotation;if(c(t))return{playerCurrentTime:t.time,annotationMayBeOffscreen:!1}},t.isComments2Mobile=i.is_mobile_or_tablet,t.canShowUnreadPill=function(){return!a.msie},t.isTimecodeAnnotation=c,t.useBolt=function(){return!o.COMMENTS2_DISABLE_BOLT};var d=function(e,t,r){return Math.min.apply(Math,(function(e){return"image"===e.annotation.type?[e.annotation.region]:e.annotation.regions})(e).map((function(e){return(function(e,t,r){var n=e.x+e.width,i=e.y+e.height,o=function(e,t){return e<t?e:1/0};if(u(t.x,e.x,n)&&u(t.y,e.y,i)){var a=16/r.width,s=16/r.height;return Math.min(o(Math.min(t.x-e.x,n-t.x),a),o(Math.min(t.y-e.y,i-t.y),s))}return 1/0})(e,t,r)})))};function p(e){var t=e.x,r=e.y,n=e.width,i=e.height;return 0===t&&0===r&&1===n&&1===i}t.getThreadForNumberedAnnotationAtPoint=function(e,t,r){return n=function(t){return d(t,e,r)},t.reduce((function(e,t){var r=e.minRank,i=e.minElem,o=n(t);return r<=o?{minRank:r,minElem:i}:{minRank:o,minElem:t}}),{minRank:1/0,minElem:void 0}).minElem;var n},t.isFullPageAnnotation=function(e){return 1===e.regions.length&&p(e.regions[0])},t.isFullImageAnnotation=function(e){return p(e.region)},t.createFullRectangle=function(){return{x:0,y:0,width:1,height:1}}})),define("modules/clean/react/comments2/video_annotations/annotation_helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.unitConvertSecondsToDomainObjectTime=function(e){return null!=e?Math.round(100*e):0},e.unitConvertDomainObjectTimeToSeconds=function(e){return null!=e?e/100:0}})(t.VideoAnnotationHelper||(t.VideoAnnotationHelper={}))})),define("modules/clean/react/comments2/video_annotations/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes={PAUSE:"PAUSE",SEEK_POSITION_AND_PAUSE:"SEEK_POSITION_AND_PAUSE"}})),define("modules/clean/react/comments2/video_annotations/video_preview_event_emitter",["require","exports","tslib","eventemitter3"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.videoPreviewEventEmitter=new n.default}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/file_metadata/component/loadable_metadata_details",["require","exports","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableMetadataDetails=r.Loadable({loader:function(){return n.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/file_metadata/component/metadata_details"],t,r)})).then(__importStar).then((function(e){return e.MetadataDetails}))}))}})})),define("modules/clean/react/file_sidebar/file_sidebar_connect",["require","exports","tslib","react","react-redux","hoist-non-react-statics"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importDefault(o),t.FILE_SIDEBAR_REDUX_STORE_KEY="SIDEBAR_REDUX_STORE_KEY",t.fileSidebarConnect=function(e,a){var s={storeKey:t.FILE_SIDEBAR_REDUX_STORE_KEY},l=a?i.connect(e,a,void 0,s):i.connect(e,void 0,void 0,s);return function(e){var t=l(e),i=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(i,e),i.prototype.render=function(){return n.default.createElement(t,r.__assign({},this.props))},i.displayName="FileSidebar"+t.displayName,i.WrappedComponent=t,i})(n.default.Component);return o.default(i,t)}}})),define("modules/clean/react/file_sidebar/store/app/reducer",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={hideComments:!1,hidePageChrome:!1},t.reducer=function(e,n){switch(void 0===e&&(e=t.INITIAL_STATE),n.type){case"APP_SET_STATE":var i=n.hideComments,o=n.hidePageChrome;return r.__assign(r.__assign({},e),{hideComments:i,hidePageChrome:o})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/actions",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_sidebar/store/file_activity/api"],(function(e,t,r,n,i){"use strict";function o(e){return{type:"FILE_ACTIVITY|RECEIVE_STREAM_ERROR",error:e}}function a(e,t){return{type:"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY",activities:e,enabled:t}}function s(e,t){return{type:"FILE_ACTIVITY|LOADING_START",userId:e,file:t}}function l(e){return{type:"FILE_ACTIVITY|LOADING_END",state:e}}function c(){return{type:"FILE_ACTIVITY|RESET_FILE_STATE"}}function u(e,t){return(e.file?e.file.file_id:-1)!==(t.file?t.file.file_id:-1)||e.userId!==t.userId}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.api={create:function(e){return new i.FileActivityStreamApi(e)}},t.receiveStreamError=o,t.receiveFileActivity=a,t.loadingStart=s,t.loadingEnd=l,t.reset=function(){return{type:"FILE_ACTIVITY|RESET"}},t.resetFileState=c;var d=0;t.getActivityStream=function(e,r){return function(i,c){if(u({file:r,userId:e},n.getContext(c()))){var p=t.api.create(e);i({type:"FILE_ACTIVITY|RESET_FILE_STATE"}),i(s(e,r));var m=++d,f=r.file_id;return p.getActivityStream(f).then((function(t){var o=t.enabled,s=t.activity_group;u({file:r,userId:e},n.getContext(c()))||i(a(s,o))})).catch((function(e){m===d&&i(o(e))})).then((function(){m===d&&i(l(n.getState(c())))}))}}}})),define("modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/sorted_set"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(r){return void 0===r&&(r=[]),e.call(this,r,t.compare,t.equals)||this}return r.__extends(t,e),t.compare=function(e,t){return e.id===t.id?0:t.timestamp.getTime()-e.timestamp.getTime()},t.equals=function(e,t){return e.id===t.id},t})(n.SortedSet);t.ActivitySortedSet=i})),define("modules/clean/react/file_sidebar/store/file_activity/api",["require","exports","tslib","external/lodash","modules/clean/api_v2/user_client"],(function(e,t,r,n,i){"use strict";function o(e,t,r,n){return".tag"===t?0===n?["type",r]:r in e?r:[null,r]:r}function a(e,t,r,n){return"string"==typeof r&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(r)?new Date(r):r}function s(e,t,r){return void 0===r&&(r=0),Array.isArray(e)?e.map((function(e){return s(e,t,r+1)})):n.isObject(e)?Object.keys(e).reduce((function(i,o){var a=e[o];if(Array.isArray(a)||n.isObject(a))i[o]=s(a,t,r+1);else{var l=t(e,o,a,r);if(Array.isArray(l)){if(null===l[0])return l[1];i[l[0]]=l[1]}else i[o]=l}return i}),{}):t(null,"",e,r)}function l(e){return s(s(e,o),a)}function c(e){return r.__assign(r.__assign({},l(e.activities[0])),{groupActivities:e.activities.map(l),isGroup:!0})}Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.parseActivity=l,t.parseGroupActivity=c;var u=(function(){function e(e){this.userId=e,this.client=new i.UserApiV2Client}return e.prototype.getActivityStream=function(e){return this.client.ns("file_activity_stream").rpc("get_activity_stream",{file_path_or_id:e},{subjectUserId:this.userId}).then((function(e){return{enabled:e.enabled,activity_group:(e.activity_group||[]).map(c)}}))},e})();t.FileActivityStreamApi=u})),define("modules/clean/react/file_sidebar/store/file_activity/reducer",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set"],(function(e,t,r,n){"use strict";function i(e){return e.map((function(e){return e.isGroup&&1===e.groupActivities.length?e.groupActivities[0]:e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={activities:{error:void 0,loaded:!1,loading:!1,value:[]},enabled:!1,userId:-1},t.ungroupSingleActivityGroups=i,t.reducer=function(e,o){switch(void 0===e&&(e=t.INITIAL_STATE),o.type){case"FILE_ACTIVITY|RESET":return r.__assign({},t.INITIAL_STATE);case"FILE_ACTIVITY|RESET_FILE_STATE":return r.__assign(r.__assign({},e),{activities:t.INITIAL_STATE.activities});case"FILE_ACTIVITY|LOADING_START":return r.__assign(r.__assign({},e),{activities:r.__assign(r.__assign({},e.activities),{error:void 0,loading:!0}),userId:o.userId,file:o.file});case"FILE_ACTIVITY|LOADING_END":return r.__assign(r.__assign({},e),{activities:r.__assign(r.__assign({},e.activities),{loaded:!0,loading:!1})});case"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY":var a=o.enabled?new n.ActivitySortedSet(r.__spreadArrays(e.activities.value,i(o.activities))).toArray():[];return r.__assign(r.__assign({},e),{activities:r.__assign(r.__assign({},e.activities),{value:a}),enabled:o.enabled});case"FILE_ACTIVITY|RECEIVE_STREAM_ERROR":return r.__assign(r.__assign({},e),{activities:r.__assign(r.__assign({},e.activities),{error:o.error})})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/selectors",["require","exports"],(function(e,t){"use strict";function r(e){return e.fileActivity}function n(e){return r(e).activities.value}function i(e){return r(e).file}function o(e){return r(e).userId}Object.defineProperty(t,"__esModule",{value:!0}),t.getState=r,t.getActivities=n,t.getActivitiesMetadata=function(e){return r(e).activities},t.getVisibleActivityCount=function(e){return n(e).length},t.getFile=i,t.getUserId=o,t.getContext=function(e){return{file:i(e),userId:o(e)}},t.isActivityEnabled=function(e){return r(e).enabled}})),define("modules/clean/react/file_sidebar/store/file_activity/sorted_set",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e,t,r){void 0===e&&(e=[]),this.items=[],this.compare=t,this.equals=r,this.add(e)}return e.prototype.add=function(e){var t=this;Array.isArray(e)||(e=[e]);var r=this.items.concat(e);return r.sort(this.compare),this.items=r.filter((function(e,r,n){return 0===r||!t.equals(e,n[r-1])})),this},e.prototype.toArray=function(){return Array.prototype.slice.call(this.items)},e})();t.SortedSet=r})),define("modules/clean/react/file_sidebar/store/middleware/reactor",["require","exports","modules/clean/shallow_equal"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return r.shallowEqual(e,t)};function i(e){return"function"==typeof e.changes}function o(e){return"function"==typeof e.changesIn}function a(e){return"function"==typeof e.changesFrom&&"function"==typeof e.changesTo}t.reactor=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];function s(e,t,s){var l;if(void 0===s&&(s=n),i(e))l=function(t,r){return{changed:e.changes(t,r)}};else if(o(e))l=function(t,r){var n=e.changesIn(t),i=e.changesIn(r);return{prevValue:n,nextValue:i,changed:!s(n,i)}};else{if(!a(e))throw new Error;l=function(t,r){var n=e.changesFrom(t),i=e.changesTo(r);return{changed:n&&i}}}r.push({checkForChange:l,onChange:t})}for(var l=0,c=e;l<c.length;l++){var u=c[l];u(s)}return function(e){var t=e.getState;return function(e){return function(n){for(var i=t(),o=e(n),a=t(),s=0,l=r;s<l.length;s++){var c=l[s],u=c.checkForChange(i,a),d=u.prevValue,p=u.nextValue;u.changed&&c.onChange({nextValue:p,prevValue:d,nextState:a,prevState:i})}return o}}}}})),define("modules/clean/react/file_sidebar/store/middleware/thunk",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thunk=function(){return function(e){var t=e.dispatch,r=e.getState;return function(e){return function(n){return"function"==typeof n?n(t,r):e(n)}}}}})),define("modules/clean/react/file_sidebar/store/sidebar/helpers",["require","exports","modules/clean/file_store/utils"],(function(e,t,r){"use strict";function n(e,t){return!e&&!t||!!e&&!!t&&r.areFilesEqual(e,t)}function i(e,t){return!e&&!t||!!e&&!!t&&e.id===t.id}Object.defineProperty(t,"__esModule",{value:!0}),t.isFileSame=n,t.isUserSame=i,t.isContextChanged=function(e,t){return!n(e.file,t.file)||!i(e.user,t.user)}})),define("modules/clean/react/file_sidebar/store/sidebar/reducer",["require","exports","tslib","modules/clean/react/file_sidebar/store/sidebar/types"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={activeTab:"comments",open:!0,openReason:void 0,ready:!1,context:{file:void 0,isVersionHistoryMode:void 0,user:void 0},tabs:{activity:{ready:!1,show:!1,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!1}},hasOverride:!1,thirdpartyBlueDotOnboarded:!1},t.reducer=function(e,i){void 0===e&&(e=t.INITIAL_STATE);var o=(function(e,i){var o;switch(i.type){case n.ActionType.SidebarOverrideInitialState:var a=i.payload,s=a.open,l=a.tab;return r.__assign(r.__assign({},e),{open:s,activeTab:l,tabs:r.__assign(r.__assign({},e.tabs),(o={},o[l]=r.__assign(r.__assign({},e.tabs[l]),{show:!0}),o)),hasOverride:!0});case n.ActionType.SidebarReset:return r.__assign(r.__assign({},t.INITIAL_STATE),{open:e.open});case n.ActionType.SidebarOpen:return r.__assign(r.__assign({},e),{open:!0,openReason:i.payload.reason});case n.ActionType.SidebarClose:return r.__assign(r.__assign({},e),{open:!1,openReason:void 0});case n.ActionType.SidebarSelectTab:return r.__assign(r.__assign({},e),{activeTab:i.payload.tabName});case n.ActionType.SidebarSetThirdPartyBlueDotOnboardState:return r.__assign(r.__assign({},e),{thirdpartyBlueDotOnboarded:!0});case n.ActionType.SidebarOpenFile:var c=i.payload,u=c.file,d=c.isVersionHistoryMode,p=c.user;return r.__assign(r.__assign({},e),{openReason:void 0,context:{file:u,isVersionHistoryMode:d,user:p},tabs:{activity:{ready:!p,show:!1===d&&e.tabs.activity.show,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!0}}});case"FILE_ACTIVITY|LOADING_END":return r.__assign(r.__assign({},e),{tabs:r.__assign(r.__assign({},e.tabs),{activity:{ready:!0,show:!1===e.context.isVersionHistoryMode&&i.state.enabled,count:0}})});case n.ActionType.SidebarSetComments2DisabledState:return r.__assign(r.__assign({},e),{tabs:r.__assign(r.__assign({},e.tabs),{comments:{ready:!0,show:!1,count:0,extra:{commentCount:0}}})});case n.ActionType.SidebarSetComments2ShownState:return r.__assign(r.__assign({},e),{activeTab:e.hasOverride?e.activeTab:"comments",tabs:r.__assign(r.__assign({},e.tabs),{comments:{ready:!0,show:!e.hasOverride||e.tabs.comments.show,count:0,extra:{commentCount:i.payload.commentCount}}})});case n.ActionType.SidebarIndicateNewFileNav:return r.__assign(r.__assign({},e),{tabs:r.__assign(r.__assign({},e.tabs),{comments:{ready:!1,show:!0,count:0,extra:{commentCount:0}}})})}return e})(e,i);return o.ready=e.ready||o.tabs.activity.ready&&o.tabs.comments.ready,e.ready||!o.ready||e.hasOverride||(o.tabs.comments.show&&!o.tabs.activity.show?o.activeTab="comments":!o.tabs.comments.show&&o.tabs.activity.show&&(o.activeTab="activity"),o.tabs.comments.show&&o.tabs.comments.count>0&&(o.open=!0,o.openReason=o.openReason||"unread_comments",o.activeTab="comments"),o.tabs.comments.show&&o.tabs.comments.extra&&o.tabs.comments.extra.commentCount>0&&(o.open=!0,o.openReason=o.openReason||"comments2_unresolved_threads",o.activeTab="comments")),o.ready&&o.open&&!o.openReason&&(o.openReason="sticky_state"),o}})),define("modules/clean/react/file_sidebar/store/sidebar/selectors",["require","exports"],(function(e,t){"use strict";function r(e){return e.sidebar}function n(e){return r(e).tabs}Object.defineProperty(t,"__esModule",{value:!0}),t.getState=r,t.getSidebarState=function(e){var t=r(e);return{activeTab:t.activeTab,open:t.open,openReason:t.openReason,ready:t.ready}},t.getOpenReason=function(e){return r(e).openReason},t.getSidebarContext=function(e){return r(e).context},t.getTabsState=n,t.getTabState=function(e,t){return n(e)[t]},t.getThirdPartyBlueDotOnboardedState=function(e){return r(e).thirdpartyBlueDotOnboarded}})),define("modules/clean/react/file_sidebar/store/sidebar/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.SidebarOpen="SIDEBAR|OPEN",e.SidebarReset="SIDEBAR|RESET",e.SidebarClose="SIDEBAR|CLOSE",e.SidebarSelectTab="SIDEBAR|SELECT_TAB",e.SidebarOpenFile="SIDEBAR|OPEN_FILE",e.SidebarToggle="SIDEBAR|TOGGLE",e.SidebarIndicateNewFileNav="SIDEBAR|INDICATE_NEW_FILE_NAV",e.SidebarSetComments2DisabledState="SIDEBAR|SET_COMMENTS2_DISABLED_STATE",e.SidebarSetComments2ShownState="SIDEBAR|SET_COMMENTS2_SHOWN_STATE",e.SidebarSetThirdPartyBlueDotOnboardState="SIDEBAR|SET_THIRDPARTY_BLUEDOT_ONBOARDED_STATE",e.SidebarOverrideInitialState="SIDEBAR|OVERRIDE_INITIAL_STATE"})(t.ActionType||(t.ActionType={}))}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/previews/archive/preview_archive_loadable",["require","exports","modules/clean/react/async/loadable"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewArchiveLoadable=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/previews/archive/preview_archive"],t,r)})).then(__importStar).then((function(e){return e.PreviewArchive}))}})})),define("modules/clean/react/previews/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR",e.WatermarkingError="WATERMARKING_ERROR",e.UpsellError="UPSELL_ERROR"})(t.ErrorType||(t.ErrorType={})),(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file",e.Workflow="workflow",e.TrelloPreview="trello_preview",e.FileLocking="file_locking"})(t.PreviewSourceContext||(t.PreviewSourceContext={})),(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={})),(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={})),(function(e){e.EnableRegionCreation="EnableRegionCreation",e.Fullscreen="Fullscreen",e.PageDown="PageDown",e.PageIndicator="PageIndicator",e.PageUp="PageUp",e.Print="Print",e.Sidebar="Sidebar",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.FlipControls="FlipControls"})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={}))})),define("modules/clean/react/previews/error/file_info",["require","exports","tslib","react","modules/clean/display_format"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.PreviewErrorFileInfo=function(e){var t=e.bytes,r=e.filename;return n.default.createElement("div",{className:"preview-error__info"},r,void 0!==t?n.default.createElement("span",null,n.default.createElement("span",{className:"bottom-dot"}," Â· "),i.format_bytes(t)):null)}})),define("modules/clean/react/previews/error/image",["require","exports","tslib","react","modules/clean/react/image","modules/clean/react/previews/constants","modules/clean/static_urls"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.PreviewErrorImage=function(e){var t;switch(e.errorType){case o.ErrorType.PendingUploadError:t=n.default.createElement(i.Image,{src:a.static_url("/static/js/file-viewer/img/error/file_uploading_1x-vflRuLSg0.png"),srcHiRes:a.static_url("/static/js/file-viewer/img/error/file_uploading_2x-vflKOdrWj.png")});break;case o.ErrorType.ExtensionError:t=n.default.createElement(i.Image,{src:a.static_url("/static/js/file-viewer/img/error/filetype_not_supported_1x-vflmIVODZ.png"),srcHiRes:a.static_url("/static/js/file-viewer/img/error/filetype_not_supported_2x-vflE8HW8X.png")});break;case o.ErrorType.FileSizeError:t=n.default.createElement(i.Image,{src:a.static_url("/static/js/file-viewer/img/error/file_too_large_1x-vflDGNPuo.png"),srcHiRes:a.static_url("/static/js/file-viewer/img/error/file_too_large_2x-vfl-r0UPt.png")});break;case o.ErrorType.PasswordProtectedError:t=n.default.createElement(i.Image,{src:a.static_url("/static/js/file-viewer/img/error/password_protected_1x-vflnFAKjt.png"),srcHiRes:a.static_url("/static/js/file-viewer/img/error/password_protected_2x-vflnBXZ1k.png")});break;case o.ErrorType.NeedFlashError:case o.ErrorType.SymLinkError:case o.ErrorType.EmptyFileError:case o.ErrorType.WatermarkingError:case o.ErrorType.LoadError:default:t=n.default.createElement(i.Image,{src:a.static_url("/static/js/file-viewer/img/error/unavailable_1x-vflG2AHMd.png"),srcHiRes:a.static_url("/static/js/file-viewer/img/error/unavailable_2x-vflGPrE5d.png")})}return n.default.createElement("div",{className:"u-mar-bottom-s preview-error__image"},t)}})),define("modules/clean/react/previews/error/message",["require","exports","tslib","react","react-intl","modules/clean/file_store/utils","modules/clean/react/previews/constants","modules/core/i18n","modules/clean/previews/data/preview_type_util","modules/clean/previews/util","modules/clean/display_format","modules/constants/trademark"],(function(e,t,r,n,i,o,a,s,l,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),l=r.__importStar(l),t.PreviewErrorMessage=function(e){var t,r=e.file?o.getExtension(e.file):void 0;if(e.message)t=e.message;else switch(e.errorType){case a.ErrorType.PendingUploadError:t=s.intl.formatMessage({defaultMessage:"File is uploading..."});break;case a.ErrorType.EmptyFileError:t=s.intl.formatMessage({defaultMessage:"Empty files canâ€™t be previewed"});break;case a.ErrorType.ExtensionError:if(!e.file)throw new Error("Extension error requires a file prop");if(r){var p=o.isArchiveFile(e.file)&&e.preview?i.defineMessage({defaultMessage:"<span>.{extension}</span> files canâ€™t be previewed from an archive file.",description:"Like '.exe files canâ€™t be previewed from an archive file'"}):i.defineMessage({defaultMessage:"<span>.{extension}</span> files canâ€™t be previewed.",description:"Like '.exe files canâ€™t be previewed'"});t=s.intl.formatMessage(p,{span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:r})}else t=s.intl.formatMessage({defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});break;case a.ErrorType.FileSizeError:var m=l.getPreviewType(e.preview),f=r&&m?c.getFileSizeLimit(r,m):void 0;t=f?s.intl.formatMessage({defaultMessage:"This file is too big to preview. {br} The maximum file size for <span>.{extension}</span> is <span>{limit}</span>"},{br:n.default.createElement("br",null),span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:r,limit:u.format_bytes(f)}):s.intl.formatMessage({defaultMessage:"This file is too big to preview."});break;case a.ErrorType.PasswordProtectedError:t=r?s.intl.formatMessage({defaultMessage:"This <span>.{extension}</span> file is password-protected."},{span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:r}):s.intl.formatMessage({defaultMessage:"This file is password-protected."});break;case a.ErrorType.NeedFlashError:t=s.intl.formatMessage({defaultMessage:"Install <a>Adobe Flash Player</a> to preview this video."},{a:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("a",{href:"https://get.adobe.com/flashplayer/"},e)}});break;case a.ErrorType.SymLinkError:t=s.intl.formatMessage({defaultMessage:"SymLink files cannot be previewed."});break;case a.ErrorType.WatermarkingError:t=s.intl.formatMessage({defaultMessage:"This file could not be watermarked."});break;case a.ErrorType.UpsellError:t=s.intl.formatMessage({defaultMessage:"<p>Canâ€™t preview <span>.{extension}</span> files. {br}Upgrade to {trademark_professional} to preview more file types.</p>"},{br:n.default.createElement("br",null),p:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("p",null,e)},span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("span",{className:"preview-error__message--bold"},e)},trademark_professional:d.TRADEMARK_PROFESSIONAL,extension:r});break;case a.ErrorType.LoadError:default:t=r?s.intl.formatMessage({defaultMessage:"<span>.{extension}</span> files are supported but something went wrong."},{span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:r}):s.intl.formatMessage({defaultMessage:"This file canâ€™t be previewed"})}return n.default.createElement("div",{className:"preview-error__message"},t)}})),define("modules/clean/react/previews/fidelity_survey/fidelity_survey",["require","exports","tslib","modules/clean/react/async/loadable","modules/clean/web_timing_logger","modules/constants/file_viewer","react"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=r.__importDefault(a),t.LoadableFidelitySurvey=n.Loadable({loader:function(){return i.waitForTTI().then((function(){return new Promise((function(t,r){e(["modules/clean/react/previews/fidelity_survey/fidelity_survey_component"],t,r)})).then(r.__importStar).then((function(e){return e.FidelitySurvey}))}))}});var s=(function(e){function n(t){var r=e.call(this,t)||this;return r.shouldLoad=100*Math.random()<o.PREVIEW_FIDELITY_SURVEY_PROBABILITY,r}return r.__extends(n,e),n.prototype.render=function(){var e=this.props,r=e.allowFileDonation,n=e.file;return this.shouldLoad&&n?a.default.createElement(t.LoadableFidelitySurvey,{allowFileDonation:r,file:n}):null},n})(a.default.Component);t.FidelitySurvey=s})),define("modules/clean/react/previews/frame_messenger_host",["require","exports","tslib","file-viewer/libraries/frame_messenger"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=["www.dropboxstatic.com","cf.dropboxstatic.com","cfl.dropboxstatic.com","www.dropbox.com","dl-web.dropbox.com","dl.dropboxusercontent.com","previews.dropboxusercontent.com","previews.dropbox.com"].map((function(e){return"https://"+e}));return t.push("null"),t.push(RegExp(".*previews.*.dropboxusercontent.com")),e.call(this,t)||this}return r.__extends(t,e),t})(n.FrameMessengerHost);t.PreviewFrameMessengerHost=i})),define("modules/clean/react/previews/image_helpers",["require","exports","tslib","modules/constants/python","modules/clean/photos/thumbnail_url_util"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n);var o=[[480,320],[640,480],[800,600],[1024,768],[1280,960],[1600,1200],[2048,1536]];function a(e,t){return(t?o.filter((function(e){var r=e[0],n=e[1];return r<=t[0]&&n<=t[1]})):o).map((function(t){var r=t[0],o=t[1];return i.thumbnailUrlForSize(e,r,o,n.THUMBNAIL_SIZE_MODE.ABSTRACT)+" "+r+"w"})).join(", ")}function s(e){return i.thumbnailUrlForSize(e,800,600,n.THUMBNAIL_SIZE_MODE.ABSTRACT)}function l(e,t){return new Promise((function(r,n){var i=Date.now(),o=new Image;o.onload=function(){r({started:i,completed:Date.now()})},o.onerror=function(){n({started:i,failed:Date.now()})},t&&(t.srcset&&(o.srcset=t.srcset),t.sizes&&(o.sizes=t.sizes)),o.src=e}))}t.IMG_SIZES_ATTR="90vw",t.getSrcSet=a,t.getFallbackSrc=s,t.preloadResponsiveImage=function(e){return l(s(e),{srcset:a(e),sizes:t.IMG_SIZES_ATTR})},t.preloadImage=l})),define("modules/clean/react/previews/loading_indicator",["require","exports","tslib","classnames","react"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),i=r.__importDefault(i),t.LoadingIndicator=function(e){return i.default.createElement("div",{className:n.default("c-loader",e.className)})}})),define("modules/clean/react/previews/preview_linkfile",["require","exports","tslib","classnames","react","modules/clean/ajax","modules/clean/em_string","modules/clean/filepath","modules/clean/react/css","modules/clean/react/file_viewer/constants","modules/clean/referrer_cleansing_redirect","modules/clean/web_timing_logger","modules/clean/static_urls","modules/core/i18n"],(function(e,t,r,n,i,o,a,s,l,c,u,d,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),i=r.__importDefault(i),o=r.__importStar(o),u=r.__importStar(u),d=r.__importStar(d);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={description:null,hadError:!1,link:null,isMounted:!1},t.requestLinkfileData=function(e){t.logFilePreviewEvent(c.EventType.FilePreviewDownloadAttempted);var r={url:e,dataType:"json",success:t.handleLinkDataSuccess,error:t.handleLinkDataError,xhrFields:{withCredentials:!1}};t.props.data.authenticated?(r.xhrFields={withCredentials:!0},o.SilentBackgroundRequest(r)):o.Request(r)},t.handleLinkDataSuccess=function(e){null!=e.uri?(t.logFilePreviewEvent(c.EventType.FilePreviewDownloadSucceeded),t.markWebTiming(),t.setState({description:e.uri,hadError:!1,link:e.uri}),t.logFilePreviewEvent(c.EventType.FilePreviewRenderSucceeded),t.props.setRenderStatusSuccess()):t.handleLinkDataError()},t.handleLinkDataError=function(){t.logFilePreviewEvent(c.EventType.FilePreviewDownloadFailed),t.markWebTiming(),t.state.isMounted&&t.setState({description:m.intl.formatMessage({defaultMessage:"Canâ€™t show link. Somethingâ€™s wrong with this file."}),hadError:!0,link:null})},t.handleClickOpenLinkButton=function(e){if(null!=t.state.link){var r=u.get_redirect_uri(t.state.link);window.open(r.toString(),"_blank")}},t}return r.__extends(t,e),t.prototype.logFilePreviewEvent=function(e){this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e)},t.prototype.markWebTiming=function(){d.mark_time_to_view(),d.mark_time_to_interactive()},t.prototype.isFileDataFetched=function(){return null==this.state.description},t.prototype.componentDidMount=function(){this.logFilePreviewEvent(c.EventType.FilePreviewSupportConfirmed),this.state.isMounted=!0,this.requestLinkfileData(this.props.data.url)},t.prototype.componentWillUnmount=function(){this.state.isMounted=!1},t.prototype.render=function(){var e={"preview-linkfile-content":!0,"loading-content":this.isFileDataFetched()},r={"preview-linkfile-button-openlink":!0,"button-primary":!0,"has-link":null!=this.state.link},o="-",l="";null!=this.props.filename&&(o=s.filename_without_extension(this.props.filename),""!==(l=s.file_extension(this.props.filename))&&(l="."+l));var c=t.MAX_DISPLAYED_FILENAME_CHARS-l.length,u=a.Emstring.em_snippet(o,c),d="-";null!=this.state.description&&(d=this.state.description);var f={"preview-linkfile-description":!0,"force-show-all-text":this.state.hadError},_=p.static_url("/static/images/icons128/page_white_linkfile-vfloEntlU.png");return i.default.createElement("div",{className:"flex-preview-container"},i.default.createElement("div",{className:"preview-content preview-content--center"},i.default.createElement("div",{className:"preview-linkfile-box"},i.default.createElement("div",{className:n.default(e)},i.default.createElement("div",{className:"preview-linkfile-icon"},i.default.createElement("img",{src:_,alt:""})),i.default.createElement("div",{className:"preview-linkfile-title"},i.default.createElement("span",{className:"preview-linkfile-filebase"},u),i.default.createElement("span",{className:"preview-linkfile-fileext"},l)),i.default.createElement("div",{className:"preview-linkfile-info"},i.default.createElement("div",{className:n.default(f)},d),i.default.createElement("button",{className:n.default(r),onMouseUp:this.handleClickOpenLinkButton,ref:"openLinkButton"},m.intl.formatMessage({defaultMessage:"Open in new tab"})))))))},t.SPINNER_FADE_DELAY_MSEC=150,t.MAX_DISPLAYED_FILENAME_CHARS=21,t})(i.default.Component);t._PreviewLinkfile=f;var _=l.requireCssWithComponent(f,["/static/css/preview_linkfile-vflI60wqL.css"]);t.PreviewLinkfile=_})),define("modules/clean/react/previews/preview_pdf_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/css","modules/clean/react/previews/loading_indicator"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n);var s=i.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/previews/preview_pdf"],t,r)})).then(r.__importStar).then((function(e){return e.PreviewPDF}))},loading:function(e){return e.previewThumbnailUrl?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(a.LoadingIndicator,{className:"loading-indicator"}))):null}}),l=o.requireCssWithComponent(s,["/static/css/preview_pdf-vflHtk4hk.css","/static/css/snackbar-vfl8chDI1.css"]);t.PreviewPDFLoadable=l})),define("modules/clean/react/previews/preview_ppt_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/css","modules/clean/react/previews/loading_indicator"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n);var s=i.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/previews/preview_ppt"],t,r)})).then(r.__importStar).then((function(e){return e.PreviewPPT}))},loading:function(e){return e.previewThumbnailUrl?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(a.LoadingIndicator,{className:"loading-indicator"}))):null}}),l=o.requireCssWithComponent(s,["/static/css/preview_pdf-vflHtk4hk.css","/static/css/snackbar-vfl8chDI1.css"]);t.PreviewPPTLoadable=l}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/previews/preview_toolbar",["require","exports","modules/clean/react/async/loadable"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewToolbar=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/previews/preview_toolbar_component"],t,r)})).then(__importStar).then((function(e){return e.PreviewToolbar}))}})})),define("modules/clean/react/previews/preview_toolbar_frame_messenger",["require","exports","tslib","react","modules/clean/react/previews/frame_messenger_host","modules/clean/previews/util"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),o=r.__importStar(o);var a=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setupFrameMessenger=function(){t.frameMessenger=new i.PreviewFrameMessengerHost,t.frameMessenger.configureChildMessaging(o.getIframeQuery(),t.handleMessageFromChild,["idle-mouse","active-mouse"]),t.frameMessenger.startListening(),t.frameMessenger.postMessageToChildren("preview-toolbar-mounted")},t.handleMessageFromChild=function(e){switch(e.action){case"idle-mouse":t.props.idleMouse();break;case"active-mouse":t.props.activeMouse()}},t.teardownFrameMessenger=function(){t.frameMessenger.resetOriginsForPosting(),t.frameMessenger.stopListening()},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.setupFrameMessenger()},t.prototype.componentWillUnmount=function(){this.teardownFrameMessenger()},t.prototype.render=function(){return null},t})(n.default.Component);t.PreviewToolbarFrameMessenger=a})),define("modules/clean/react/previews/print_helpers",["require","exports","modules/core/i18n"],(function(e,t,r){"use strict";function n(e){return!(e&&e.canPrintRoles&&0===e.canPrintRoles.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.canPrint=n,t.getPrintTooltip=function(e){return n(e)?r.intl.formatMessage({defaultMessage:"Print"}):r.intl.formatMessage({defaultMessage:"Printing is turned off for this file."})}})),define("modules/clean/react/previews/video/constants",["require","exports","tslib"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.PlayerRendered="player_rendered",e.FirstClickPlay="first_click_play",e.MediaError="media_error",e.ChangePlaybackRate="change_playback_rate",e.ChangeVideoQuality="change_video_quality",e.ClosePreview="close_preview",e.SeekVideo="seek_video",e.VideoStartsPlaying="video_starts_playing",e.VideoResumesPlaying="video_resumes_playing",e.VideoStalled="video_stalled",e.VideoPaused="video_paused",e.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",e.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",e.AudioWaveformLoaded="audio_waveform_loaded",e.AudioWaveformFailed="audio_waveform_failed"})(t.VideoPreviewEvent||(t.VideoPreviewEvent={})),t.HdLabels=["1080p","720p"],t.QualityLabelOrder=r.__spreadArrays(t.HdLabels,["480p","360p","240p","256k","192k","128k"]).reverse()})),define("modules/clean/react/previews/video/utils",["require","exports","tslib","modules/core/browser_detection"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.showQualityNativeHls=function(){return n.edge||n.safari};t.video_type=function(e){return"application/vnd.apple.mpegurl"},t.getTechFromPlayer=function(e){return e.tech({IWillNotUseThisInPlugins:!0})}}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};define("modules/clean/react/share_download/button",["require","exports","modules/clean/react/async/loadable"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadSimpleButton=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/share_download/button_component"],t,r)})).then(__importStar).then((function(e){return e.DownloadSimpleButton}))}}),t.ShareDownloadButton=r.Loadable({loader:function(){return new Promise((function(t,r){e(["modules/clean/react/share_download/button_component"],t,r)})).then(__importStar).then((function(e){return e.ShareDownloadButton}))}})})),define("modules/clean/react/watermarking/api",["require","exports","modules/clean/api_v2/user_client"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendWatermarkRequest=function(e,t,n,i){var o,a,s=new r.UserApiV2Client;i&&(!(function(e){return"distanceX"in e})(i)?a={image:i.image,position:i.position,margin_x:Math.round(i.marginX),margin_y:Math.round(i.marginY)}:o={image:i.image,distance_x:Math.round(i.distanceX),distance_y:Math.round(i.distanceY),start_x:Math.round(i.startX),start_y:Math.round(i.startY),offset_x_per_row:Math.round(i.offsetXPerRow),offset_y_per_col:Math.round(i.offsetYPerCol)});var l={path:t,overwrite:n,tiled_image:o,image_watermark:a};return s.ns("file_viewer").rpc("watermarking/watermark_file",l,{subjectUserId:e})}})),define("modules/clean/react/workflows/i18n/apply_translation",["require","exports","modules/core/i18n"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTranslation=function(e){return"Test string"===e.text&&"this is an unused string for sample purposes only"===e.description?r.intl.formatMessage({defaultMessage:"Test string",description:"this is an unused string for sample purposes only"}):"Upgrade"===e.text&&"Upgrade Dropbox account"===e.description?r.intl.formatMessage({defaultMessage:"Upgrade",description:"Upgrade Dropbox account"}):"Youâ€™re in trial mode."===e.text&&"This will be shown to basic and plus users when they test out watermarking"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Youâ€™re in trial mode.",description:"This will be shown to basic and plus users when they test out watermarking"}):"Upgrade to Professional to apply your watermark."===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Upgrade to Professional to apply your watermark.",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"}):"Upgrade to Professional for advanced features"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Upgrade to Professional for advanced features",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"}):"Upgrade to Professional to get watermarking"===e.text&&"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Upgrade to Professional to get watermarking",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade"}):"Protect work right in Dropbox"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Protect work right in Dropbox",description:"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox"}):"Apply watermarks quickly"===e.text&&"Value prop: Users can apply watermarks to their pdf/images quickly"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Apply watermarks quickly",description:"Value prop: Users can apply watermarks to their pdf/images quickly"}):"Create custom watermarks"===e.text&&"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Create custom watermarks",description:"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)"}):"Protect work with watermarking"===e.text&&"Value prop: Users can protect their images/pdfs by watermarking them in Dropbox"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Protect work with watermarking",description:"Value prop: Users can protect their images/pdfs by watermarking them in Dropbox"}):"Get %(pro_space_limit)s of storage"===e.text&&"Value prop: Users get more storage if they upgrade to Professional"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Get {pro_space_limit} of storage",description:"Value prop: Users get more storage if they upgrade to Professional"},{pro_space_limit:e.pro_space_limit}):"Free up space with Smart Sync"===e.text&&"Value prop: Users can free up space with Smart Sync if they upgrade to Professional"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Free up space with Smart Sync",description:"Value prop: Users can free up space with Smart Sync if they upgrade to Professional"}):"Make a copy"===e.text&&"As in: save the markup file as a copy"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Make a copy",description:"As in: save the markup file as a copy"}):"Replace original"===e.text&&"As in: overwrite this file with markup file"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Replace original",description:"As in: overwrite this file with markup file"}):"Save"===e.text&&"Save the file"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Save",description:"Save the file"}):"Try Professional free"===e.text&&"Try Dropbox Professional for free"===e.description?r.intl.formatMessage({defaultMessage:"Try Professional free",description:"Try Dropbox Professional for free"}):"Set expiration dates for file requests"===e.text&&"Value prop: Users can set expiration dates for their file requests"===e.description?r.intl.formatMessage({defaultMessage:"Set expiration dates for file requests",description:"Value prop: Users can set expiration dates for their file requests"}):"Add an image or text watermark to save"===e.text&&"As in: notifying user they cannot save watermark if no image uploaded or text set"===e.description&&"watermarking"===e.project?r.intl.formatMessage({defaultMessage:"Add an image or text watermark to save",description:"As in: notifying user they cannot save watermark if no image uploaded or text set"}):null}})),define("modules/clean/react/workflows/i18n/with_translations",["require","exports","tslib","react","premium-workflows/common/i18n","modules/core/i18n","modules/clean/react/helpers","modules/clean/react/workflows/i18n/apply_translation","modules/clean/display_format"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.withTranslations=function(e){var t=function(t){return n.default.createElement(i.TranslationProvider,{applyTranslation:s.applyTranslation,formatBytes:l.format_bytes,formatPercent:function(e){return o.intl.formatNumber(e/100,{style:"percent"})},isEnvExternal:!0},n.default.createElement(e,r.__assign({},t)))};return t.displayName="WithTranslations("+a.getDisplayName(e)+")",t}})),define("modules/clean/react/workflows/markup_icons",["require","exports","tslib","react"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importDefault(n),t.arrowIcon=n.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("line",{y1:"-1",x2:"18.4444",y2:"-1",transform:"matrix(0.714122 -0.700021 0.724869 0.688886 2 19.5325)",stroke:"white","stroke-width":"2"}),n.default.createElement("path",{d:"M15.6003 4.81822L15.4013 13.4904L6.62128 5.14504L15.6003 4.81822Z",fill:"white"})),t.circleIcon=function(e){var t=e.stroke,r=void 0===t?"white":t,i=e.fill,o=void 0===i?"none":i;return n.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:o,xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"18",height:"18",rx:"9",stroke:r,"stroke-width":"2"}))},t.drawIcon=n.default.createElement("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M1 3.12785C1 3.12785 5.98474 -0.481787 7.42857 1.70169C9.66397 5.08224 -0.322983 7.42821 2.28571 10.6819C4.85714 13.8892 11.2857 4.26736 13.8571 7.37626C16.659 10.7637 3.89286 14.5305 6.78571 18.3792C9.19643 21.5864 19 11.3233 19 11.3233",stroke:"white","stroke-width":"2",strokeLinecap:"round"}),n.default.createElement("circle",{cx:"19",cy:"11",r:"2",fill:"white"})),t.rectIcon=n.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"})),t.textIcon=n.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"16",height:"16",stroke:"white","stroke-width":"2"}),n.default.createElement("line",{x1:"5",y1:"6",x2:"13",y2:"6",stroke:"white","stroke-width":"2"}),n.default.createElement("line",{x1:"9",y1:"5",x2:"9",y2:"13",stroke:"white","stroke-width":"2"})),t.transparentFillIcon=n.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("rect",{x:"1",y:"1",width:"15",height:"15",rx:"7.5",stroke:"#F3F4F5","stroke-width":"2"}),n.default.createElement("line",{x1:"1.93223",y1:"13.6637",x2:"13.8322",y2:"4.31368",stroke:"#F3F4F5","stroke-width":"2"}))})),define("modules/clean/shallow_equal",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.hasOwnProperty;function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.shallowEqual=function(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!r.call(t,i[a])||!n(e[i[a]],t[i[a]]))return!1;return!0}})),define("premium-workflows/common/i18n",["require","exports","tslib","react","prop-types"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),i=r.__importStar(i),t.IntlString=function(e,t){if(t.applyTranslation?t.applyTranslation(e):null)return n.createElement("span",null,t.applyTranslation(e));var r={};return t.isEnvExternal||(r={textShadow:"2px 2px 0px red"}),n.createElement("span",{style:r},e.text)},t.IntlString.displayName="IntlString",t.IntlString.contextTypes={applyTranslation:i.func},t.IntlPluralString=function(e,r){return t.IntlString(e,r)},t.IntlPluralString.displayName="IntlPluralString",t.IntlPluralString.contextTypes={applyTranslation:i.func};var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildContext=function(){return{applyTranslation:this.props.applyTranslation,formatBytes:this.props.formatBytes,formatPercent:this.props.formatPercent,isEnvExternal:this.props.isEnvExternal}},t.prototype.render=function(){return n.createElement("div",null,this.props.children)},t})(n.Component);t.TranslationProvider=o,o.displayName="TranslationProvider",o.childContextTypes={applyTranslation:i.func,formatBytes:i.func,formatPercent:i.func,isEnvExternal:i.bool}})),define("premium-workflows/components/base/apply_button",["require","exports","tslib","react","spectrum/popover","spectrum/button","premium-workflows/common/i18n"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.renderPopoverContent=function(){var e=this.props.makeACopyText||n.createElement(a.IntlString,{text:"Make a copy",description:"As in: save the markup file as a copy",project:"watermarking"}),t=this.props.overwriteText||n.createElement(a.IntlString,{text:"Replace original",description:"As in: overwrite this file with markup file",project:"watermarking"});return n.createElement(i.PopoverContent,null,n.createElement(i.PopoverContentItem,{value:!1,className:"apply-workflow-menu-item__copy"},e),n.createElement(i.PopoverContentItem,{value:!0,className:"apply-workflow-menu-item__overwrite"},t))},t.prototype.renderButton=function(){var e=this.props,t=e.onClick,r=e.disabled,i=this.props.buttonText||n.createElement(a.IntlString,{text:"Save",description:"Save the file",project:"watermarking"});return n.createElement(o.Button,{className:"apply-workflow-button",tagName:"div",disabled:r,variant:"primary",onClick:t},i)},t.prototype.render=function(){var e=this.props,t=e.onApply,r=e.disabled;return n.createElement(i.Popover,{className:"apply-workflow-button__popover",onSelection:t},n.createElement(i.PopoverTrigger,{disabled:r},this.renderButton()),this.renderPopoverContent())},t})((n=r.__importStar(n)).Component);t.ApplyButton=s})),define("premium-workflows/components/base/slider",["require","exports","tslib","react","classnames"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),i=r.__importDefault(i);var o={trackBaseColor:"#dddfe1",trackFillColor:"#0d2484"},a={trackBaseColor:"#6a7c8f",trackFillColor:"#fff"},s=(function(e){function t(t){var r=e.call(this,t)||this;return r.handleChange=function(){if(r.inputEl){var e=Number(r.inputEl.value),t=r.props.onChange,n={value:e};r.setState(n,(function(){t&&t(e)}))}},r.getTrackStyleBackground=function(e){var t=r.props,n=t.darkMode,i=t.max,s=t.min,l=Math.round(100*(e-s)*100/(i-s))/100,c=n?a:o,u=c.trackFillColor,d=c.trackBaseColor;return"linear-gradient(to right, "+u+" 0%, "+u+" "+l+"%, "+d+" "+l+"%, "+d+" 100%)"},r.handleRef=function(e){r.inputEl=e||void 0,r.handleChange()},r.state={value:t.value||50},r}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){e.value!==this.props.value&&this.setState({value:this.props.value})},t.prototype.render=function(){var e=this.props,t=e.className,r=e.darkMode,o=e.disabled,a=e.fullWidth,s=e.min,l=e.max,c=e.name,u=e.step,d=this.state.value,p=i.default("range-slider__wrapper",{"range-slider--dark-mode":r,"range-slider--full-width":a,"range-slider--disabled":o},t);return n.createElement("span",{className:p},n.createElement("span",{className:"range-slider__track",style:{background:this.getTrackStyleBackground(d)}}),n.createElement("input",{className:"range-slider",disabled:o,type:"range",min:s,max:l,value:d,name:c,step:u,onChange:this.handleChange,ref:this.handleRef,"aria-valuemin":s,"aria-valuemax":l,"aria-valuenow":d}))},t})(n.PureComponent);t.Slider=s,s.defaultProps={disabled:!1,min:0,max:100,step:1},t.default=s})),define("premium-workflows/components/base/top_banner",["require","exports","tslib","react","spectrum/button"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.TopBanner=function(e){var t=e.primaryText,r=e.secondaryText,o=e.buttonText,a=e.href,s=e.onClick;return n.createElement("div",{className:"top-banner"},n.createElement("div",{className:"top-banner__text"},n.createElement("div",{className:"top-banner__primary-text"},t,"Â "),r),n.createElement(i.Button,{variant:"secondary",href:a,onClick:s},o))}})),define("premium-workflows/components/trial/banner",["require","exports","tslib","react","premium-workflows/components/base/top_banner","premium-workflows/common/i18n"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),t.PrimaryText=function(e){switch(e.mode){case"watermarking":return n.createElement(o.IntlString,{text:"Youâ€™re in trial mode.",description:"This will be shown to basic and plus users when they test out watermarking",project:"watermarking"});default:return null}},t.SecondaryText=function(e){switch(e.mode){case"watermarking":return n.createElement(o.IntlString,{text:"Upgrade to Professional to apply your watermark.",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.Banner=function(e){var r=e.mode,a=e.onClick;return n.createElement(i.TopBanner,{primaryText:n.createElement(t.PrimaryText,{mode:r}),secondaryText:n.createElement(t.SecondaryText,{mode:r}),buttonText:n.createElement(o.IntlString,{text:"Upgrade",description:"Upgrade Dropbox account"}),onClick:a})}})),define("premium-workflows/components/trial/trial_popover_content",["require","exports","tslib","react","prop-types","premium-workflows/common/i18n","spectrum/button","spectrum/icon_form"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),i=r.__importStar(i),t.Title=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(o.IntlString,{text:"Upgrade to Professional to get watermarking",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});case"file_requests":return n.createElement(o.IntlString,{text:"Upgrade to Professional for advanced features",description:"When basic or plus users test out a professional feature such as watermarking, they will not be able to save their changes until they upgrade",project:"watermarking"});default:return null}},t.ValueProp1=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(o.IntlString,{text:"Protect work right in Dropbox",description:"Value prop: Users can protect their images/pdfs by watermarking them right in Dropbox",project:"watermarking"});case"file_requests":return n.createElement(o.IntlString,{text:"Set expiration dates for file requests",description:"Value prop: Users can set expiration dates for their file requests"});default:return null}},t.ValueProp2=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(o.IntlString,{text:"Apply watermarks quickly",description:"Value prop: Users can apply watermarks to their pdf/images quickly",project:"watermarking"});case"file_requests":return n.createElement(o.IntlString,{text:"Get %(pro_space_limit)s of storage",pro_space_limit:e.proSpaceLimit||"",description:"Value prop: Users get more storage if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp2.contextTypes={formatBytes:i.func},t.ValueProp3=function(e){switch(e.variant){case"watermarking_wm":return n.createElement(o.IntlString,{text:"Create custom watermarks",description:"Value prop: Users can create custom watermarks (e.g. changing text, uploading an image)",project:"watermarking"});case"file_requests":return n.createElement(o.IntlString,{text:"Free up space with Smart Sync",description:"Value prop: Users can free up space with Smart Sync if they upgrade to Professional",project:"watermarking"});default:return null}},t.ValueProp=function(e){var t=e.children;return n.createElement("span",{className:"value-prop"},n.createElement(s.IconForm,{className:"value-prop__check",name:"check"}),t)},t.TrialPopoverContent=function(e){var r=e.variant,i=e.proSpaceLimit,s=e.onClick;return n.createElement("div",{className:"trial-popover-content"},n.createElement("div",{className:"trial-popover-content__title"},n.createElement(t.Title,{variant:r})),n.createElement("div",{className:"trial-popover-content__value-props"},n.createElement(t.ValueProp,null,n.createElement(t.ValueProp1,{variant:r})),n.createElement(t.ValueProp,null,n.createElement(t.ValueProp2,{variant:r,proSpaceLimit:i})),n.createElement(t.ValueProp,null,n.createElement(t.ValueProp3,{variant:r}))),n.createElement(a.Button,{variant:"primary",onClick:s,shouldWrapContent:!0},n.createElement(o.IntlString,{text:"Try Professional free",description:"Try Dropbox Professional for free"})))}}));
//# sourceMappingURL=pkg-previews_core.min.js-vflbbfVnQ.map