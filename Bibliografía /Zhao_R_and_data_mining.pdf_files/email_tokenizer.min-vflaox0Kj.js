define(["require","exports","tslib","react","dig-components/avatar","spectrum/token","spectrum/tokenized_input","modules/clean/validators/email_validator"],(function(e,t,n,r,u,a,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),i=n.__importDefault(i),t.EmailTokenizer=function(e){var t=e.placeholder,o=e.emails,c=e.memberList,s=e.onChange,f=r.useState(),d=f[0],m=f[1],p=r.useState(),v=p[0],_=p[1],g=function(e){var t=e.email,n=c&&c.find((function(e){return e.email===t}));return n?r.default.createElement(r.default.Fragment,null,n.photo_url&&r.default.createElement(u.Avatar,{src:n.photo_url,size:"xsmall",hasNoOutline:!0}),n.display_name):r.default.createElement(r.default.Fragment,null,t)};return r.default.createElement(l.TokenizedInput,{className:"email-tokenizer",inputProps:{autoFocus:!0,placeholder:t,onChange:function(e){return m(e.currentTarget.value)},onFocus:function(){return _(void 0)},onKeyDown:function(e){var t,r=e.key,u=e.currentTarget,a=u.selectionStart,l=u.selectionEnd,i=u.previousElementSibling;if(0===a&&l===a&&("ArrowLeft"!==r&&"Backspace"!==r||(e.preventDefault(),null===(t=i)||void 0===t||t.focus())),d&&["Enter","Tab",","," "].includes(r)){var c=d.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length&&!o.includes(e)}));c&&(e.preventDefault(),s(n.__spreadArrays(o,c)),m(""))}},value:d},tokens:o.map((function(e){return r.default.createElement(a.Token,{key:e,variant:i.default.validate(e).every((function(e){return e.valid}))?"default":"error",selected:e===v,onClick:function(){return _(e)},onFocus:function(){return _(e)},onClose:function(t){return(function(e,t){var n,r,u=e.currentTarget.closest(".mc-token"),a=u.previousElementSibling;null===(n=u.nextElementSibling)||void 0===n||n.focus(),null===(r=a)||void 0===r||r.focus(),s(o.filter((function(e){return e!==t})))})(t,e)}},r.default.createElement(g,{email:e}))}))})}}));
//# sourceMappingURL=email_tokenizer.min.js-vflr5ckNk.map